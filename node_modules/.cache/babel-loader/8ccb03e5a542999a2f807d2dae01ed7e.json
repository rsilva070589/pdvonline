{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport { createElementVNode as _createElementVNode, unref as _unref, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, vModelSelect as _vModelSelect, withDirectives as _withDirectives, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"layout-px-spacing\",\n  style: {\n    \"margin-top\": \"0px\"\n  }\n};\n\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"text-2xl font-medium mx-2\",\n  \"data-testid\": \"statements-title-txt\"\n}, \"Demanda Mensal de Produtos\", -1);\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", null, null, -1);\n\nconst _hoisted_4 = {\n  key: 1\n};\nconst _hoisted_5 = {\n  style: {\n    \"font-size\": \"17px\"\n  }\n};\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"option\", {\n  disabled: \"\",\n  value: \"\"\n}, \"Selecione\", -1);\n\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"option\", null, \"PROXIMO-ACABAR\", -1);\n\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"option\", null, \"ITENS-ZERADOS\", -1);\n\nconst _hoisted_9 = [_hoisted_6, _hoisted_7, _hoisted_8];\nconst _hoisted_10 = {\n  key: 0,\n  class: \"conteudo\",\n  style: {\n    \"padding\": \"10px 45px 0px 0px\",\n    \"width\": \"750px\",\n    \"max-height\": \"80vh\"\n  }\n};\nconst _hoisted_11 = {\n  style: {\n    \"background-color\": \"white\"\n  },\n  role: \"table\",\n  \"aria-busy\": \"false\",\n  \"aria-colcount\": \"5\",\n  class: \"table b-table table-hover\",\n  id: \"__BVID__310\"\n};\n\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"thead\", {\n  role: \"rowgroup\",\n  class: \"\"\n}, [/*#__PURE__*/_createElementVNode(\"tr\", {\n  role: \"row\",\n  class: \"\"\n}, [/*#__PURE__*/_createElementVNode(\"th\", {\n  role: \"columnheader\",\n  scope: \"col\",\n  \"aria-colindex\": \"1\",\n  class: \"\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", null, \"#\")]), /*#__PURE__*/_createElementVNode(\"th\", {\n  role: \"columnheader\",\n  scope: \"col\",\n  \"aria-colindex\": \"2\",\n  class: \"\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", null, \"codigo\")]), /*#__PURE__*/_createElementVNode(\"th\", {\n  role: \"columnheader\",\n  scope: \"col\",\n  \"aria-colindex\": \"3\",\n  class: \"\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", null, \"NOME\")]), /*#__PURE__*/_createElementVNode(\"th\", {\n  role: \"columnheader\",\n  scope: \"col\",\n  \"aria-colindex\": \"4\",\n  class: \"\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", null, \"QTDE-ESTOQUE\")]), /*#__PURE__*/_createElementVNode(\"th\", {\n  role: \"columnheader\",\n  scope: \"col\",\n  \"aria-colindex\": \"5\",\n  class: \"\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", null, \"QTDE-VENDAS\")])])], -1);\n\nconst _hoisted_13 = {\n  role: \"row\"\n};\nconst _hoisted_14 = {\n  \"aria-colindex\": \"1\",\n  role: \"cell\",\n  class: \"\"\n};\nconst _hoisted_15 = {\n  \"aria-colindex\": \"2\",\n  role: \"cell\",\n  class: \"\"\n};\nconst _hoisted_16 = {\n  \"aria-colindex\": \"2\",\n  role: \"cell\",\n  class: \"\"\n};\nconst _hoisted_17 = {\n  \"aria-colindex\": \"2\",\n  role: \"cell\",\n  class: \"\"\n};\nconst _hoisted_18 = {\n  \"aria-colindex\": \"2\",\n  role: \"cell\",\n  class: \"\"\n};\nimport Progress from '@/components/Progress.vue';\nimport { indexStore, useUserStore } from '../../store/indexStore';\nimport { onMounted, ref } from 'vue';\nimport axios from 'axios';\nimport { useMeta } from '@/composables/use-meta';\nexport default {\n  __name: 'Demanda',\n\n  setup(__props) {\n    useMeta({\n      title: 'Multiple Tables'\n    });\n    const store = indexStore();\n    const code_arr = ref([]);\n    const storeLogin = useUserStore(); //table 1\n\n    store.recursos.progress = true;\n    store.tipoDemanda = '';\n\n    function dataAtualFormatada(dataFormat) {\n      var data = dataFormat,\n          dia = data.getDate().toString(),\n          diaF = dia.length == 1 ? '0' + dia : dia,\n          mes = (data.getMonth() + 1).toString(),\n          //+1 pois no getMonth Janeiro começa com zero.\n      mesF = mes.length == 1 ? '0' + mes : mes,\n          anoF = data.getFullYear();\n      return diaF + \"/\" + mesF + \"/\" + anoF;\n    }\n\n    function dataAtualMes(dataFormat) {\n      var data = dataFormat,\n          dia = data.getDate().toString(),\n          diaF = dia.length == 1 ? '0' + dia : dia,\n          mes = (data.getMonth() + 1).toString(),\n          //+1 pois no getMonth Janeiro começa com zero.\n      mesF = mes.length == 1 ? '0' + mes : mes,\n          anoF = data.getFullYear();\n      return mesF + \"/\" + anoF;\n    }\n\n    const end = new Date();\n    end.setHours(23, 59, 59, 999);\n    end.getTime();\n\n    function formataDinheiro(item) {\n      let venda = item;\n\n      if (!!venda && venda.toString().includes(\",\")) {\n        venda = venda.toString().replace(\",\", \".\");\n      }\n\n      return parseFloat(venda).toFixed(2).replace(\".\", \",\").replace(/(\\d)(?=(\\d{3})+\\,)/g, \"$1.\");\n    }\n\n    var arredonda = function (numero, casasDecimais) {\n      casasDecimais = typeof casasDecimais !== 'undefined' ? casasDecimais : 0;\n      return +(Math.floor(numero + ('e+' + casasDecimais)) + ('e-' + casasDecimais));\n    };\n\n    onMounted(() => {\n      bind_data();\n    });\n\n    const bind_data = async () => {\n      store.itensRelDemanda = []; // var result = await axios.get('http://localhost:4141/demanda') \n      //\"SCHEMA\": storeLogin.empresas?.schema \n      //table 2 \n\n      const getDemanda = () => {\n        let data = JSON.stringify({\n          \"SCHEMA\": \"MERCEARIABRAGATTO\"\n        });\n        let config = {\n          method: 'post',\n          maxBodyLength: Infinity,\n          url: store.baseApiHTTPS + '/demanda',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          data: data\n        };\n        axios.request(config).then(response => {\n          store.itensRelDemanda = response.data;\n          store.recursos.progress = false;\n        }).catch(error => {\n          console.log(error);\n        });\n      };\n\n      getDemanda();\n    };\n\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _hoisted_3, _unref(store).recursos.progress ? (_openBlock(), _createBlock(Progress, {\n        key: 0\n      })) : _createCommentVNode(\"\", true), !_unref(store).recursos.progress ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createTextVNode(\" Estoque para os proximos: \"), _withDirectives(_createElementVNode(\"select\", {\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _unref(store).tipoDemanda = $event)\n      }, _hoisted_9, 512), [[_vModelSelect, _unref(store).tipoDemanda]])]), !_unref(store).editando ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_createElementVNode(\"table\", _hoisted_11, [_hoisted_12, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(store).itensRelDemanda.filter(f => f.tipo == _unref(store).tipoDemanda), (item, IndexID) => {\n        return _openBlock(), _createElementBlock(\"tbody\", {\n          key: IndexID,\n          role: \"rowgroup\"\n        }, [_createElementVNode(\"tr\", _hoisted_13, [_createElementVNode(\"td\", _hoisted_14, _toDisplayString(IndexID), 1), _createElementVNode(\"td\", _hoisted_15, _toDisplayString(item.codigo_barras), 1), _createElementVNode(\"td\", _hoisted_16, _toDisplayString(item.nome), 1), _createElementVNode(\"td\", _hoisted_17, _toDisplayString(item.qtde_estoque), 1), _createElementVNode(\"td\", _hoisted_18, _toDisplayString(item.qtde_vendas), 1)])]);\n      }), 128))])])) : _createCommentVNode(\"\", true)])) : _createCommentVNode(\"\", true)]);\n    };\n  }\n\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DI,OAAOA,QAAP,MAAqB,2BAArB;AACA,SAAQC,UAAR,EAAmBC,YAAnB,QAAsC,wBAAtC;AACA,SAASC,SAAT,EAAoBC,GAApB,QAA+B,KAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,wBAAxB;;;;;IACAA,OAAO,CAAC;MAAEC,KAAK,EAAE;IAAT,CAAD,CAAP;IACA,MAAMC,KAAK,GAAGP,UAAU,EAAxB;IACA,MAAMQ,QAAQ,GAAGL,GAAG,CAAC,EAAD,CAApB;IACA,MAAMM,UAAU,GAAGR,YAAY,EAA/B,EACA;;IAEAM,KAAK,CAACG,QAAN,CAAeC,QAAf,GAA0B,IAA1B;IAEAJ,KAAK,CAACK,WAAN,GAAoB,EAApB;;IAEA,SAASC,kBAAT,CAA4BC,UAA5B,EAAuC;MACvC,IAAIC,IAAI,GAAGD,UAAX;MAAA,IACIE,GAAG,GAAID,IAAI,CAACE,OAAL,GAAeC,QAAf,EADX;MAAA,IAEIC,IAAI,GAAIH,GAAG,CAACI,MAAJ,IAAc,CAAf,GAAoB,MAAIJ,GAAxB,GAA8BA,GAFzC;MAAA,IAGIK,GAAG,GAAI,CAACN,IAAI,CAACO,QAAL,KAAgB,CAAjB,EAAoBJ,QAApB,EAHX;MAAA,IAG2C;MACvCK,IAAI,GAAIF,GAAG,CAACD,MAAJ,IAAc,CAAf,GAAoB,MAAIC,GAAxB,GAA8BA,GAJzC;MAAA,IAKIG,IAAI,GAAGT,IAAI,CAACU,WAAL,EALX;MAMA,OAAON,IAAI,GAAC,GAAL,GAASI,IAAT,GAAc,GAAd,GAAkBC,IAAzB;IACC;;IAED,SAASE,YAAT,CAAsBZ,UAAtB,EAAiC;MACjC,IAAIC,IAAI,GAAGD,UAAX;MAAA,IACIE,GAAG,GAAID,IAAI,CAACE,OAAL,GAAeC,QAAf,EADX;MAAA,IAEIC,IAAI,GAAIH,GAAG,CAACI,MAAJ,IAAc,CAAf,GAAoB,MAAIJ,GAAxB,GAA8BA,GAFzC;MAAA,IAGIK,GAAG,GAAI,CAACN,IAAI,CAACO,QAAL,KAAgB,CAAjB,EAAoBJ,QAApB,EAHX;MAAA,IAG2C;MACvCK,IAAI,GAAIF,GAAG,CAACD,MAAJ,IAAc,CAAf,GAAoB,MAAIC,GAAxB,GAA8BA,GAJzC;MAAA,IAKIG,IAAI,GAAGT,IAAI,CAACU,WAAL,EALX;MAMA,OAAOF,IAAI,GAAC,GAAL,GAASC,IAAhB;IACC;;IAEG,MAAMG,GAAG,GAAC,IAAIC,IAAJ,EAAV;IACAD,GAAG,CAACE,QAAJ,CAAa,EAAb,EAAgB,EAAhB,EAAmB,EAAnB,EAAsB,GAAtB;IACAF,GAAG,CAACG,OAAJ;;IAGJ,SAASC,eAAT,CAAyBC,IAAzB,EAA+B;MAC1B,IAAIC,KAAK,GAAGD,IAAZ;;MACA,IAAI,CAAC,CAACC,KAAF,IAAWA,KAAK,CAACf,QAAN,GAAiBgB,QAAjB,CAA0B,GAA1B,CAAf,EAA+C;QAC7CD,KAAK,GAAGA,KAAK,CAACf,QAAN,GAAiBiB,OAAjB,CAAyB,GAAzB,EAA8B,GAA9B,CAAR;MACD;;MACD,OAAOC,UAAU,CAACH,KAAD,CAAV,CACJI,OADI,CACI,CADJ,EAEJF,OAFI,CAEI,GAFJ,EAES,GAFT,EAGJA,OAHI,CAGI,qBAHJ,EAG2B,KAH3B,CAAP;IAIJ;;IAED,IAAIG,SAAS,GAAG,UAASC,MAAT,EAAiBC,aAAjB,EAAgC;MAChDA,aAAa,GAAG,OAAOA,aAAP,KAAyB,WAAzB,GAAwCA,aAAxC,GAAwD,CAAxE;MACA,OAAO,EAAEC,IAAI,CAACC,KAAL,CAAWH,MAAM,IAAI,OAAOC,aAAX,CAAjB,KAA+C,OAAOA,aAAtD,CAAF,CAAP;IACD,CAHC;;IAQAtC,SAAS,CAAC,MAAM;MACZyC,SAAS;IACZ,CAFQ,CAAT;;IAIA,MAAMA,SAAS,GAAG,YAAa;MAC3BpC,KAAK,CAACqC,eAAN,GAAwB,EAAxB,CAD2B,CAGhC;MAEA;MACK;;MAEF,MAAMC,UAAU,GAAG,MAAK;QACtB,IAAI9B,IAAI,GAAG+B,IAAI,CAACC,SAAL,CAAe;UACzB,UAAU;QADe,CAAf,CAAX;QAII,IAAIC,MAAM,GAAG;UACbC,MAAM,EAAE,MADK;UAEbC,aAAa,EAAEC,QAFF;UAGbC,GAAG,EAAE7C,KAAK,CAAC8C,YAAN,GAAmB,UAHX;UAIbC,OAAO,EAAE;YACL,gBAAgB;UADX,CAJI;UAObvC,IAAI,EAAGA;QAPM,CAAb;QAUAX,KAAK,CAACmD,OAAN,CAAcP,MAAd,EACCQ,IADD,CACOC,QAAD,IAAc;UACpBlD,KAAK,CAACqC,eAAN,GAAwBa,QAAQ,CAAC1C,IAAjC;UACAR,KAAK,CAACG,QAAN,CAAeC,QAAf,GAA0B,KAA1B;QACC,CAJD,EAKC+C,KALD,CAKQC,KAAD,IAAW;UAClBC,OAAO,CAACC,GAAR,CAAYF,KAAZ;QACC,CAPD;MAQL,CAvBD;;MAwBAd,UAAU;IAKX,CArCD","names":["Progress","indexStore","useUserStore","onMounted","ref","axios","useMeta","title","store","code_arr","storeLogin","recursos","progress","tipoDemanda","dataAtualFormatada","dataFormat","data","dia","getDate","toString","diaF","length","mes","getMonth","mesF","anoF","getFullYear","dataAtualMes","end","Date","setHours","getTime","formataDinheiro","item","venda","includes","replace","parseFloat","toFixed","arredonda","numero","casasDecimais","Math","floor","bind_data","itensRelDemanda","getDemanda","JSON","stringify","config","method","maxBodyLength","Infinity","url","baseApiHTTPS","headers","request","then","response","catch","error","console","log"],"sources":["/home/renato/projetos/pdvsmart/src/views/demanda/Demanda.vue"],"sourcesContent":["<template> \n    <div class=\"layout-px-spacing\" style=\"margin-top: 0px;\">\n        <h2 class=\"text-2xl font-medium mx-2\" data-testid=\"statements-title-txt\">Demanda Mensal de Produtos</h2>\n        <div> \n</div>\n \n \n<Progress v-if=\"store.recursos.progress\" />\n\n<div v-if=\"!store.recursos.progress\">\n \n <div style=\"font-size: 17px;\">\n Estoque para os proximos:\n                                        <select  v-model=\"store.tipoDemanda\">\n                                            <option disabled value=\"\">Selecione</option> \n                                            <option>PROXIMO-ACABAR</option>\n                                            <option>ITENS-ZERADOS</option>                                                                            \n                                        </select>\n </div>\n\n <div  \n        v-if=\"!store.editando\"\n        class=\"conteudo\"\n        style=\"padding: 10px 45px 0px 0px; \n                 width: 750px; \n            max-height: 80vh;\">\n    \n        <table style=\"background-color: white;\" role=\"table\" aria-busy=\"false\" aria-colcount=\"5\" class=\"table b-table table-hover\" id=\"__BVID__310\">\n                <thead role=\"rowgroup\" class=\"\">\n                    <tr role=\"row\" class=\"\">\n                        <th role=\"columnheader\" scope=\"col\" aria-colindex=\"1\" class=\"\"><div>#</div></th>\n                        <th role=\"columnheader\" scope=\"col\" aria-colindex=\"2\" class=\"\"><div>codigo</div></th>\n                        <th role=\"columnheader\" scope=\"col\" aria-colindex=\"3\" class=\"\"><div>NOME</div></th>\n                        <th role=\"columnheader\" scope=\"col\" aria-colindex=\"4\" class=\"\"><div>QTDE-ESTOQUE</div></th>\n                        <th role=\"columnheader\" scope=\"col\" aria-colindex=\"5\" class=\"\"><div>QTDE-VENDAS</div></th>                     \n                    </tr>\n                </thead>\n                <tbody v-for=\"(item, IndexID) in store.itensRelDemanda.filter(f=> f.tipo == store.tipoDemanda)\" :key=\"IndexID\" role=\"rowgroup\">\n                    <tr role=\"row\" >\n                        <td aria-colindex=\"1\" role=\"cell\" class=\"\"> {{IndexID }}   </td>\n                        <td aria-colindex=\"2\" role=\"cell\" class=\"\"> {{item.codigo_barras }}   </td>\n                        <td aria-colindex=\"2\" role=\"cell\" class=\"\"> {{item.nome }}   </td>\n                        <td aria-colindex=\"2\" role=\"cell\" class=\"\"> {{item.qtde_estoque }}   </td>\n                        <td aria-colindex=\"2\" role=\"cell\" class=\"\"> {{item.qtde_vendas }}   </td>    \n                            \n                       \n                                      \n                    </tr> \n                    \n                </tbody>\n            </table> \n    </div>\n\n    \n</div>\n       \n    </div>\n</template>\n\n<script setup>\n    import Progress from '@/components/Progress.vue';\n    import {indexStore,useUserStore} from '../../store/indexStore' \n    import { onMounted, ref } from 'vue';\n    import axios from 'axios'\n    import { useMeta } from '@/composables/use-meta';\n    useMeta({ title: 'Multiple Tables' });\n    const store = indexStore(); \n    const code_arr = ref([]);\n    const storeLogin = useUserStore();\n    //table 1\n\n    store.recursos.progress = true\n\n    store.tipoDemanda = ''\n\n    function dataAtualFormatada(dataFormat){\n    var data = dataFormat,\n        dia  = data.getDate().toString(),\n        diaF = (dia.length == 1) ? '0'+dia : dia,\n        mes  = (data.getMonth()+1).toString(), //+1 pois no getMonth Janeiro começa com zero.\n        mesF = (mes.length == 1) ? '0'+mes : mes,\n        anoF = data.getFullYear();\n    return diaF+\"/\"+mesF+\"/\"+anoF;\n    } \n\n    function dataAtualMes(dataFormat){\n    var data = dataFormat,\n        dia  = data.getDate().toString(),\n        diaF = (dia.length == 1) ? '0'+dia : dia,\n        mes  = (data.getMonth()+1).toString(), //+1 pois no getMonth Janeiro começa com zero.\n        mesF = (mes.length == 1) ? '0'+mes : mes,\n        anoF = data.getFullYear();\n    return mesF+\"/\"+anoF;\n    } \n    \n        const end=new Date()\n        end.setHours(23,59,59,999)\n        end.getTime()\n \n\n    function formataDinheiro(item) {\n         let venda = item;\n         if (!!venda && venda.toString().includes(\",\")) {\n           venda = venda.toString().replace(\",\", \".\");\n         }\n         return parseFloat(venda)\n           .toFixed(2)\n           .replace(\".\", \",\")\n           .replace(/(\\d)(?=(\\d{3})+\\,)/g, \"$1.\");\n    }\n\n    var arredonda = function(numero, casasDecimais) {\n    casasDecimais = typeof casasDecimais !== 'undefined' ?  casasDecimais : 0;\n    return +(Math.floor(numero + ('e+' + casasDecimais)) + ('e-' + casasDecimais));\n  };\n\n \n      \n \n    onMounted(() => {\n        bind_data();\n    });\n\n    const bind_data = async  () => {\n        store.itensRelDemanda = []\n \n   // var result = await axios.get('http://localhost:4141/demanda') \n      \n   //\"SCHEMA\": storeLogin.empresas?.schema \n        //table 2 \n\n      const getDemanda = ()=> {\n        let data = JSON.stringify({\n         \"SCHEMA\": \"MERCEARIABRAGATTO\"\n            });\n\n            let config = {\n            method: 'post',\n            maxBodyLength: Infinity,\n            url: store.baseApiHTTPS+'/demanda',\n            headers: { \n                'Content-Type': 'application/json'\n            },\n            data : data\n            };\n\n            axios.request(config)\n            .then((response) => { \n            store.itensRelDemanda = response.data\n            store.recursos.progress = false\n            })\n            .catch((error) => {\n            console.log(error);\n            });\n      }\n      getDemanda()\n         \n \n        \n\n    }\n   \n\n \n \n\n\n</script>\n\n<style>\n.conteudo { \n    flex-direction: row;\n    /* justify-content: center; */\n    align-items: center;\n    width: 100%;\n    overflow-x: auto;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}
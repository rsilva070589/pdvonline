{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport { unref as _unref, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Teleport as _Teleport, createBlock as _createBlock, createVNode as _createVNode, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment } from \"vue\";\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"toast-body toast-danger justify-content-between\",\n  style: {\n    \"text-align\": \"center\"\n  }\n}, \" Data Final não pode ser menor que a Data Incial... \", -1);\n\nconst _hoisted_2 = [_hoisted_1];\nconst _hoisted_3 = {\n  key: 1\n};\nconst _hoisted_4 = {\n  class: \"layout-px-spacing dash_2\"\n};\n\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"ul\", {\n  class: \"navbar-nav flex-row\"\n}, [/*#__PURE__*/_createElementVNode(\"li\", null, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"page-header\"\n}, [/*#__PURE__*/_createElementVNode(\"nav\", {\n  class: \"breadcrumb-one\",\n  \"aria-label\": \"breadcrumb\"\n}, [/*#__PURE__*/_createElementVNode(\"ol\", {\n  class: \"breadcrumb\"\n}, [/*#__PURE__*/_createElementVNode(\"li\", {\n  class: \"breadcrumb-item\"\n}, [/*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"javascript:;\"\n}, \"Relatorios\")]), /*#__PURE__*/_createElementVNode(\"li\", {\n  class: \"breadcrumb-item active\",\n  \"aria-current\": \"page\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", null, \"Dre\")])])])])])], -1);\n\nconst _hoisted_6 = {\n  key: 1,\n  style: {\n    \"text-align\": \"\",\n    \"font-size\": \"30px\"\n  }\n};\nconst _hoisted_7 = {\n  key: 0,\n  style: {\n    \"margin-top\": \"-30px\"\n  }\n};\nconst _hoisted_8 = {\n  key: 0,\n  style: {\n    \"color\": \"blue\",\n    \"font-size\": \"20px\",\n    \"text-align\": \"center\"\n  }\n};\nconst _hoisted_9 = {\n  style: {\n    \"color\": \"red\",\n    \"font-size\": \"20px\",\n    \"font-weight\": \"bold\"\n  }\n};\nconst _hoisted_10 = {\n  key: 1,\n  style: {\n    \"display\": \"flex\",\n    \"justify-content\": \"center\"\n  }\n};\nconst _hoisted_11 = {\n  role: \"table\",\n  \"aria-busy\": \"false\",\n  \"aria-colcount\": \"5\",\n  class: \"table b-table table-hover\",\n  id: \"__BVID__310\"\n};\n\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"thead\", {\n  role: \"rowgroup\",\n  class: \"\"\n}, [/*#__PURE__*/_createElementVNode(\"tr\", {\n  role: \"row\",\n  class: \"\"\n}, [/*#__PURE__*/_createElementVNode(\"th\", {\n  role: \"columnheader\",\n  scope: \"col\",\n  \"aria-colindex\": \"1\",\n  class: \"\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", null, \"Terminal\")]), /*#__PURE__*/_createElementVNode(\"th\", {\n  role: \"columnheader\",\n  scope: \"col\",\n  \"aria-colindex\": \"2\",\n  style: {\n    \"text-align\": \"end\"\n  }\n}, [/*#__PURE__*/_createElementVNode(\"div\", null, \"Valor\")])])], -1);\n\nconst _hoisted_13 = {\n  role: \"row\",\n  class: \"\"\n};\nconst _hoisted_14 = {\n  \"aria-colindex\": \"1\",\n  role: \"cell\",\n  class: \"\",\n  style: {\n    \"font-weight\": \"bold\",\n    \"text-align\": \"center\"\n  }\n};\nconst _hoisted_15 = {\n  \"aria-colindex\": \"2\",\n  role: \"cell\",\n  style: {\n    \"text-align\": \"end\",\n    \"font-weight\": \"bold\"\n  }\n};\nconst _hoisted_16 = {\n  key: 2,\n  style: {\n    \"padding\": \"5px\",\n    \"font-size\": \"20px\",\n    \"display\": \"flex\",\n    \"justify-content\": \"center\"\n  }\n};\n\nconst _hoisted_17 = /*#__PURE__*/_createElementVNode(\"div\", {\n  style: {\n    \"background-color\": \"#dadfdf\",\n    \"text-align\": \"center\",\n    \"border-radius\": \"50%\",\n    \"width\": \"50px\",\n    \"height\": \"50px\"\n  }\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  style: {\n    \"padding-top\": \"10px\"\n  }\n}, \" < \")], -1);\n\nconst _hoisted_18 = [_hoisted_17];\nconst _hoisted_19 = [\"onClick\"];\nconst _hoisted_20 = {\n  style: {\n    \"padding-top\": \"10px\"\n  }\n};\n\nconst _hoisted_21 = /*#__PURE__*/_createElementVNode(\"div\", {\n  style: {\n    \"background-color\": \"#dadfdf\",\n    \"text-align\": \"center\",\n    \"border-radius\": \"50%\",\n    \"width\": \"50px\",\n    \"height\": \"50px\"\n  }\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  style: {\n    \"padding-top\": \"10px\"\n  }\n}, \" > \")], -1);\n\nconst _hoisted_22 = [_hoisted_21];\nimport '@/assets/sass/widgets/widgets.scss';\nimport { onMounted, ref, computed } from 'vue';\nimport { indexStore, useUserStore } from '../../store/indexStore';\nimport { useMeta } from '@/composables/use-meta';\nimport axios from 'axios';\nimport { useRouter } from \"vue-router\";\nimport Progress from '@/components/Progress.vue';\nimport funcoesGlobais from './funcoesGlobais';\nimport Filtros from './Filtros.vue';\nexport default {\n  __name: 'Terminal',\n\n  setup(__props) {\n    useMeta({\n      title: 'Relatorios'\n    });\n    const storeLogin = useUserStore();\n    const router = useRouter();\n    const store = indexStore();\n    login();\n    store.myColor = '#FF00FF';\n    store.carregando = false;\n    store.dadosRel = [];\n    store.relMondado = [];\n\n    function login() {\n      switch (storeLogin.empresas?.login) {\n        case true:\n          console.log('usuario logado');\n          break;\n\n        case 'true':\n          console.log('usuario logado');\n          break;\n\n        default:\n          console.log('precisa fazer login');\n          router.push('/auth/login');\n      }\n    }\n\n    function logout() {\n      storeLogin.empresas.sucess = false;\n      console.log(storeLogin.empresas.sucess);\n      router.push('/auth/login');\n    }\n\n    store.indexVendas = 0;\n    store.filtro = {\n      empresa: 'CENTRAL',\n      dataInicial: dataFormatada(new Date()),\n      dataFinal: dataFormatada(new Date())\n    };\n\n    function filtros() {\n      store.dataErrada = false;\n\n      if (storeLogin.empresas?.sucess && store.filtro.dataFinal >= store.filtro.dataInicial) {\n        store.relLoja = [];\n        store.relMondado = [];\n        store.relVendedores = [];\n        store.relAnual = [];\n        store.relContas = [];\n        store.Progress = true;\n        getTypeRel(storeLogin.empresas.databasecliente, store.filtro.empresa, store.filtro.dataInicial, store.filtro.dataFinal, 5);\n      } else {\n        store.dataErrada = true;\n      }\n    }\n\n    async function getTypeRel(DataBaseCliente, ComboEmpresas, DataInicial, DataFinal, TypeRel) {\n      let data = JSON.stringify({\n        \"databasecliente\": DataBaseCliente,\n        \"comboempresas\": ComboEmpresas,\n        \"datainicial\": DataInicial,\n        \"datafinal\": DataFinal,\n        \"typerel\": TypeRel\n      });\n      console.log('TypeRel: ' + TypeRel + ' DataInicial: ' + DataInicial + ' DataInicial: ' + DataFinal);\n      let config = {\n        method: 'post',\n        maxBodyLength: Infinity,\n        url: store.ulrprincipal + '/evento/report',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Basic dGVzdHNlcnZlcjp0ZXN0c2VydmVy'\n        },\n        data: data\n      };\n      await axios.request(config).then(response => {\n        if (TypeRel == 5) {\n          store.dadosRel = response.data.dados;\n          const arr = [];\n          response.data.dados.map(x => {\n            var dados = {\n              EMPRESA: x.nome\n            };\n\n            if (arr.filter(f => f.EMPRESA == x.nome).length == 0) {\n              arr.push(dados);\n            }\n          });\n          arr.map(x => {\n            var dados = {\n              EMPRESA: x.EMPRESA,\n              REGISTRO: response.data.dados.filter(f => f.nome == x.EMPRESA)\n            };\n\n            if (store.relMondado.filter(f => f.EMPRESA == x.nome).length == 0) {\n              store.relMondado.push(dados);\n            }\n          });\n          console.log(response.data.dados);\n          selectEmpresa(0);\n        }\n\n        store.Progress = false;\n        return response;\n      }).catch(error => {\n        console.log(error);\n        store.Progress = false;\n      });\n    }\n\n    function selectEmpresa(index) {\n      store.indexVendas = index;\n\n      if (store.detectar_mobile()) {\n        window.scrollTo(0, 270);\n      }\n    }\n\n    function dataFormatada(d) {\n      var data = new Date(d),\n          dia = data.getDate().toString(),\n          diaF = dia.length == 1 ? '0' + dia : dia,\n          mes = (data.getMonth() + 1).toString(),\n          //+1 pois no getMonth Janeiro começa com zero.\n      mesF = mes.length == 1 ? '0' + mes : mes,\n          anoF = data.getFullYear();\n      return anoF + \"-\" + mesF + \"-\" + diaF;\n    }\n\n    function somaValor(array) {\n      if (array) {\n        var arr = array;\n        var sum = 0;\n\n        for (var i = 0; i < arr.length; i++) {\n          sum += arr[i];\n        }\n      }\n\n      return sum;\n    }\n\n    function formataDinheiro(item) {\n      let venda = item;\n\n      if (!!venda && venda.toString().includes(\",\")) {\n        venda = venda.toString().replace(\",\", \".\");\n      }\n\n      return parseFloat(venda).toFixed(2).replace(\".\", \",\").replace(/(\\d)(?=(\\d{3})+\\,)/g, \"$1.\");\n    }\n\n    const anterior = () => {\n      if (store.indexVendas < store.relMondado?.length - 1) {\n        store.indexVendas = store.indexVendas + 1;\n        selectEmpresa(store.indexVendas);\n        console.log('index Empresa: ' + store.indexVendas);\n      }\n    };\n\n    const proximo = () => {\n      if (store.indexVendas > 0) {\n        store.indexVendas = store.indexVendas - 1;\n        selectEmpresa(store.indexVendas);\n        console.log('index Empresa: ' + store.indexVendas);\n      }\n    };\n\n    return (_ctx, _cache) => {\n      return _openBlock(), _createElementBlock(_Fragment, null, [_unref(store).dataErrada ? (_openBlock(), _createElementBlock(\"div\", {\n        key: 0,\n        onClick: _cache[0] || (_cache[0] = $event => _unref(store).dataErrada = false),\n        style: {\n          \"z-index\": \"1080\"\n        },\n        role: \"alert\",\n        \"aria-live\": \"assertive\",\n        \"aria-atomic\": \"true\"\n      }, _hoisted_2)) : _createCommentVNode(\"\", true), _unref(storeLogin).empresas?.sucess == 'true' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [(_openBlock(), _createBlock(_Teleport, {\n        to: \"#breadcrumb\"\n      }, [_hoisted_5])), _createElementVNode(\"div\", {\n        style: _normalizeStyle([!_unref(store).detectar_mobile() ? {\n          'display': 'flex'\n        } : ''])\n      }, [_createVNode(Filtros), _createElementVNode(\"div\", {\n        class: \"form-group col-md-2 align-items-center\",\n        style: _normalizeStyle([!_unref(store).detectar_mobile() ? {\n          'margin': '0px 0px 0px 10px'\n        } : ''])\n      }, [_createElementVNode(\"div\", {\n        class: _normalizeClass([\"btn btn-primary mb-4 form-control active w-250\", _unref(store).detectar_mobile() ? 'filtrosMobileButton' : 'filtrosWebButton']),\n        onClick: _cache[1] || (_cache[1] = $event => filtros())\n      }, \" ATUALIZAR \", 2)], 4)], 4), _unref(store).Progress ? (_openBlock(), _createBlock(Progress, {\n        key: 0\n      })) : _createCommentVNode(\"\", true), !_unref(store).Progress && !_unref(store).dadosRel?.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, \" Sem dados para exibir neste período... \")) : _createCommentVNode(\"\", true), _createElementVNode(\"div\", {\n        style: _normalizeStyle([{\n          \"min-height\": \"440px\",\n          \"display\": \"flex\"\n        }, [_unref(store).detectar_mobile() ? {\n          'justify-content': 'center'\n        } : {\n          'justify-content': 'left'\n        }]])\n      }, [_unref(store).Progress == false ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_unref(store).relMondado?.length > 0 && _unref(store).dadosRel.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, _toDisplayString(_unref(store).relMondado[_unref(store).indexVendas]?.EMPRESA), 1)])) : _createCommentVNode(\"\", true), !_unref(store).editando ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_unref(store).relMondado?.length > 0 ? (_openBlock(), _createElementBlock(\"div\", {\n        key: 0,\n        class: \"table-light table-responsive\",\n        style: _normalizeStyle([{\n          \"background-color\": \"#ffffff\"\n        }, [!_unref(store).detectar_mobile() ? {\n          'width': '400px'\n        } : '']])\n      }, [_createElementVNode(\"table\", _hoisted_11, [_hoisted_12, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(store).relMondado[_unref(store).indexVendas].REGISTRO, (item, i) => {\n        return _openBlock(), _createElementBlock(\"tbody\", {\n          key: item.name,\n          role: \"rowgroup\"\n        }, [_createElementVNode(\"tr\", _hoisted_13, [_createElementVNode(\"td\", _hoisted_14, _toDisplayString(item.cdterminal), 1), _createElementVNode(\"td\", _hoisted_15, [_createElementVNode(\"span\", {\n          style: _normalizeStyle([[item.COR == 'red' ? {\n            'color': '#B22222'\n          } : '#000000'], [item.COR == 'blue' ? {\n            'color': '#00008B'\n          } : '#000000']])\n        }, \"R$ \" + _toDisplayString(formataDinheiro(item.valor)), 5)])])]);\n      }), 128))])], 4)) : _createCommentVNode(\"\", true)])) : _createCommentVNode(\"\", true), _unref(store).relMondado?.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [_createElementVNode(\"div\", {\n        style: {\n          \"background-color\": \"#ffffff\",\n          \"padding\": \"5px\"\n        },\n        onClick: _cache[2] || (_cache[2] = $event => proximo())\n      }, _hoisted_18), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(store).relMondado, (item, i) => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          key: item.DADOS\n        }, [_createElementVNode(\"div\", {\n          style: {\n            \"background-color\": \"#ffffff\",\n            \"padding\": \"5px\"\n          },\n          onClick: $event => selectEmpresa(i)\n        }, [_createElementVNode(\"div\", {\n          class: _normalizeClass(_unref(store).indexVendas == i ? 'itemSelecionado' : 'itemNaoSelecionado'),\n          style: {\n            \"text-align\": \"center\",\n            \"border-radius\": \"50%\",\n            \"width\": \"50px\",\n            \"height\": \"50px\"\n          }\n        }, [_createElementVNode(\"div\", _hoisted_20, _toDisplayString(i + 1), 1)], 2)], 8, _hoisted_19)]);\n      }), 128)), _createElementVNode(\"div\", {\n        style: {\n          \"background-color\": \"#ffffff\",\n          \"padding\": \"5px\"\n        },\n        onClick: _cache[3] || (_cache[3] = $event => anterior())\n      }, _hoisted_22)])) : _createCommentVNode(\"\", true)])) : _createCommentVNode(\"\", true)], 4)])])) : _createCommentVNode(\"\", true)], 64);\n    };\n  }\n\n};","map":{"version":3,"mappings":"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","names":["onMounted","ref","computed","indexStore","useUserStore","useMeta","axios","useRouter","Progress","funcoesGlobais","Filtros","title","storeLogin","router","store","login","myColor","carregando","dadosRel","relMondado","empresas","console","log","push","logout","sucess","indexVendas","filtro","empresa","dataInicial","dataFormatada","Date","dataFinal","filtros","dataErrada","relLoja","relVendedores","relAnual","relContas","getTypeRel","databasecliente","DataBaseCliente","ComboEmpresas","DataInicial","DataFinal","TypeRel","data","JSON","stringify","config","method","maxBodyLength","Infinity","url","ulrprincipal","headers","request","then","response","dados","arr","map","x","EMPRESA","nome","filter","f","length","REGISTRO","selectEmpresa","catch","error","index","detectar_mobile","window","scrollTo","d","dia","getDate","toString","diaF","mes","getMonth","mesF","anoF","getFullYear","somaValor","array","sum","i","formataDinheiro","item","venda","includes","replace","parseFloat","toFixed","anterior","proximo"],"sources":["/home/renato/projetos/pdvsmart/src/views/relatorios/Terminal.vue"],"sourcesContent":["<template> \n \n <div v-if=\"store.dataErrada\" @click=\"store.dataErrada=false\"\n    style=\"z-index: 1080\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\">\n    <div class=\"toast-body toast-danger   justify-content-between\"\n    style=\"text-align: center;\"> \n    Data Final não pode ser menor que a Data Incial...\n    </div>\n</div>\n \n    <div v-if=\"storeLogin.empresas?.sucess == 'true'\"  >  \n        <div class=\"layout-px-spacing dash_2\">\n            <teleport to=\"#breadcrumb\">\n                <ul class=\"navbar-nav flex-row\">\n                    <li>\n                        <div class=\"page-header\">\n                            <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\n                                <ol class=\"breadcrumb\">\n                                    <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Relatorios</a></li>\n                                    <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Dre</span></li>\n                                </ol>\n                            </nav>\n                        </div>\n                    </li>\n                </ul>\n            </teleport> \n\n         \n            <div :style=\"[!store.detectar_mobile() ? {'display': 'flex' } : '']\"> \n                <Filtros  />\n\n                <div class=\"form-group col-md-2 align-items-center\"\n                v-bind:style=\"[!store.detectar_mobile() ? {'margin': '0px 0px 0px 10px' } : '' ]\"\n                >    \n                <div class=\"btn btn-primary mb-4 form-control active w-250\" \n                    v-bind:class=\"(store.detectar_mobile()) ? 'filtrosMobileButton' : 'filtrosWebButton'\"                \n                    @click=\"filtros()\">\n                    ATUALIZAR\n                </div>\n                </div>  \n\n                </div>\n       \n            \n      \n         \n     \n    <Progress v-if=\"store.Progress\"/> \n    \n      <div v-if=\"   !store.Progress\n                 && !store.dadosRel?.length > 0  \n                 \"\n        style=\"text-align: ; font-size: 30px;\"\n        >\n        Sem dados para exibir neste período...\n      </div>\n \n      <div style=\" min-height: 440px;  display: flex;\" v-bind:style=\"[store.detectar_mobile() ? {'justify-content': 'center' } : {'justify-content': 'left' }]\">\n      <div v-if=\"store.Progress == false\" style=\"margin-top: -30px;\">\n        <div v-if=\"store.relMondado?.length > 0 && store.dadosRel.length > 0\" style=\"color: blue; font-size: 20px; text-align: center\">\n           \n             <div style=\"color: red; font-size: 20px; font-weight: bold;\">\n                {{ store.relMondado[store.indexVendas]?.EMPRESA }}   \n        </div>\n        </div>\n        <div v-if=\"!store.editando\" style=\"display: flex; justify-content: center;\"> \n\n        <div  v-if=\"store.relMondado?.length > 0\"  class=\"table-light table-responsive\" style=\"  background-color: #ffffff;\" v-bind:style=\"[!store.detectar_mobile() ? {'width': '400px' } : '']\">\n            <table role=\"table\" aria-busy=\"false\" aria-colcount=\"5\" class=\"table b-table table-hover\" id=\"__BVID__310\">\n                <thead role=\"rowgroup\" class=\"\">\n                    <tr role=\"row\" class=\"\">\n                        <th role=\"columnheader\" scope=\"col\" aria-colindex=\"1\" class=\"\"><div>Terminal</div></th>\n                        <th role=\"columnheader\" scope=\"col\" aria-colindex=\"2\"  style=\"text-align: end;\"><div>Valor</div></th>                       \n                    </tr>\n                </thead>\n                <tbody v-for=\"(item, i) in store.relMondado[store.indexVendas].REGISTRO\" :key=\"item.name\" role=\"rowgroup\">\n                    <tr role=\"row\" class=\"\">\n                        <td aria-colindex=\"1\" role=\"cell\" class=\"\" style=\" font-weight: bold ; text-align: center;\" >{{ item.cdterminal }}</td>\n                        <td aria-colindex=\"2\" role=\"cell\" style=\"text-align: end; font-weight: bold ;\"  > <span :style=\"[item.COR == 'red' ? {'color': '#B22222' } : '#000000' ]\" \n                                                                                                                v-bind:style=\"[item.COR == 'blue' ? {'color': '#00008B' } : '#000000' ]\" \n                                                                                                                >R$ {{ formataDinheiro(item.valor) }}</span> </td> \n                    </tr>\n                </tbody>\n            </table>\n        </div>\n \n\n      </div>\n      <div  v-if=\"store.relMondado?.length > 0\" style=\"padding: 5px; font-size: 20px;   display: flex; justify-content: center;\">\n                   <div style=\"background-color: #ffffff; padding: 5px;\"  @click=\"proximo()\">\n                    \n                    <div\n                          style=\"background-color: #dadfdf; text-align: center; border-radius:50%; width: 50px; height: 50px;\"> \n                          <div style=\"padding-top: 10px;\">\n                            &lt; \n                          </div> \n                          \n                    </div> \n                </div>\n                \n            <div v-for=\"(item, i) in store.relMondado\" :key=\"item.DADOS\">\n                <div style=\"background-color: #ffffff; padding: 5px;\"  @click=\"selectEmpresa(i)\">\n                    <div :class=\" (store.indexVendas == i) ? 'itemSelecionado' : 'itemNaoSelecionado'\"\n                          style=\"\n                                 text-align:        center; \n                                 border-radius:50%; width: 50px; height: 50px;\"> \n                          <div style=\"padding-top: 10px;\">\n                                    {{ i+1 }}  \n                          </div> \n                          \n                    </div> \n                </div>\n            </div>\n            <div style=\"background-color: #ffffff; padding: 5px;\"  @click=\"anterior()\">\n                    <div  \n                          style=\"background-color: #dadfdf; text-align: center; border-radius:50%; width: 50px; height: 50px;\"> \n                          <div style=\"padding-top: 10px;\">\n                            &gt; \n                          </div>  \n                    </div> \n                </div>\n        </div>\n        \n\n    </div> \n  </div>\n        </div>\n    </div>    \n    </template>\n     \n    <script setup>\n        import '@/assets/sass/widgets/widgets.scss';\n        import { onMounted, ref, computed } from 'vue';  \n        import { indexStore, useUserStore } from '../../store/indexStore'  \n        import { useMeta } from '@/composables/use-meta';\n        import   axios from 'axios';\n        import { useRouter } from \"vue-router\"; \n        import Progress from '@/components/Progress.vue';\n        import funcoesGlobais from './funcoesGlobais'\n        import Filtros from './Filtros.vue'\n        \n        useMeta({ title: 'Relatorios' });\n        const storeLogin = useUserStore()  \n        const router = useRouter() \n        const store = indexStore(); \n        login()\n          \n        store.myColor = '#FF00FF';\n        store.carregando = false \n        store.dadosRel = []\n        store.relMondado = []\n\n\n        \n        function login (){ \n          switch (storeLogin.empresas?.login) {\n          case true:\n              console.log('usuario logado')  \n              break;\n          case 'true':\n              console.log('usuario logado')  \n              break; \n          default:\n              console.log('precisa fazer login')    \n              router.push('/auth/login')           \n          } \n    }\n    \n      function logout(){ \n        storeLogin.empresas.sucess =false\n        console.log( storeLogin.empresas.sucess ) \n        router.push('/auth/login') \n      }\n    \n   \n        \n    store.indexVendas = 0 \n\n\n  store.filtro= { \n            empresa: 'CENTRAL',\n            dataInicial:  dataFormatada(new Date()),\n            dataFinal:    dataFormatada(new Date())\n        }\n\n    function filtros() {\n    store.dataErrada = false\n    if(storeLogin.empresas?.sucess && store.filtro.dataFinal >= store.filtro.dataInicial){\n        store.relLoja = []\n        store.relMondado = []\n        store.relVendedores = []\n        store.relAnual = []\n        store.relContas = []\n        store.Progress = true        \n        getTypeRel(storeLogin.empresas.databasecliente,store.filtro.empresa,store.filtro.dataInicial,store.filtro.dataFinal,5)\n    }else{\n        store.dataErrada = true\n    }\n   }\n\n   async function getTypeRel (DataBaseCliente,ComboEmpresas,DataInicial,DataFinal,TypeRel) {\n                let data = JSON.stringify({\n                \"databasecliente\": DataBaseCliente,\n                \"comboempresas\": ComboEmpresas,\n                \"datainicial\": DataInicial,\n                \"datafinal\": DataFinal,\n                \"typerel\": TypeRel\n                });\n    \n                console.log('TypeRel: '+TypeRel +' DataInicial: '+DataInicial+' DataInicial: '+DataFinal)\n    \n                let config = {\n                method: 'post',\n                maxBodyLength: Infinity,\n                url:  store.ulrprincipal+'/evento/report',\n                headers: { \n                    'Content-Type': 'application/json', \n                    'Authorization': 'Basic dGVzdHNlcnZlcjp0ZXN0c2VydmVy'\n                },\n                data : data\n                };\n    \n                await axios.request(config)\n                .then((response) => {   \n                   \n                    if(TypeRel == 5){ \n                        store.dadosRel = response.data.dados  \n                        const arr = []\n\n                        response.data.dados.map( x=> {\n                            var dados = {\n                                EMPRESA: x.nome,                              \n\n                            }\n                            if(arr.filter(f=> f.EMPRESA == x.nome).length == 0){\n                                arr.push(dados)\n                            }\n                            \n                        })\n\n                        arr.map( x=> {\n                            var dados = {\n                                EMPRESA: x.EMPRESA,       \n                                REGISTRO:  response.data.dados.filter(f=> f.nome==x.EMPRESA)\n\n                            }\n                            if(store.relMondado.filter(f=> f.EMPRESA == x.nome).length == 0){\n                                store.relMondado.push(dados)\n                            }\n                            \n                        })\n                       \n                        console.log(response.data.dados )\n                        selectEmpresa(0)\n                    }    \n                   \n                    store.Progress = false\n                    return response  \n\n                    \n                \n                })\n                .catch((error) => {\n                console.log(error);\n                store.Progress = false\n                });  \n        } \n \n \n  function selectEmpresa (index) {\n    store.indexVendas=index\n \n            if(store.detectar_mobile()){ \n              window.scrollTo(0,270);\n\n        }     \n  }\n     \n    \n        function dataFormatada(d){ \n        var data =  new Date(d),\n            dia  = data.getDate().toString(),\n            diaF = (dia.length == 1) ? '0'+dia : dia,\n            mes  = (data.getMonth()+1).toString(), //+1 pois no getMonth Janeiro começa com zero.\n            mesF = (mes.length == 1) ? '0'+mes : mes,\n            anoF = data.getFullYear();\n        return anoF+\"-\"+mesF+\"-\"+diaF;\n        }\n      \n    \n    \n        \n        function somaValor(array) { \n            if(array) {\n                var arr =  array     \n            var sum = 0; \n            for(var i =0;i<arr.length;i++){ \n              sum+=arr[i]; \n            }   \n            }\n       \n            return (sum)\n          }\n    \n          function formataDinheiro(item) {\n             let venda = item;\n             if (!!venda && venda.toString().includes(\",\")) {\n               venda = venda.toString().replace(\",\", \".\");\n             }\n             return parseFloat(venda)\n               .toFixed(2)\n               .replace(\".\", \",\")\n               .replace(/(\\d)(?=(\\d{3})+\\,)/g, \"$1.\");\n        }\n\nconst anterior = ()=> {   \n   if (store.indexVendas < store.relMondado?.length -1) {\n     store.indexVendas = store.indexVendas +1\n     selectEmpresa(store.indexVendas)\n     console.log('index Empresa: '+store.indexVendas)\n   }   \n }\n\n const proximo = ()=> {  \n  if (store.indexVendas > 0) {\n    store.indexVendas = store.indexVendas -1\n    selectEmpresa(store.indexVendas)\n    console.log('index Empresa: '+store.indexVendas)\n  }  \n}\n     \n    \n    </script>\n    \n    <style>    \n    .filtrosWeb { \n     min-height: 43px;        \n    }\n    .filtrosMobile { \n     margin-top: -30px;    \n     min-height:  43px;    \n    }\n    .filtrosWebButton { \n     min-height: 43px;   \n     margin-top: 23px;       \n    }\n    .filtrosMobileButton { \n     margin-top: -20px;    \n     min-height:  43px;    \n    }\n    .itemSelecionado {\n        background-color: rgb(156, 156, 235);\n    }\n    .itemNaoSelecionado {\n        background-color: #dadfdf; \n    }\n    </style>\n    \n    "]},"metadata":{},"sourceType":"module"}
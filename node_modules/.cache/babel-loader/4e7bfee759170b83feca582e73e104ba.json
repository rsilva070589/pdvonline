{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport { createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"layout-px-spacing\",\n  style: {\n    \"margin-top\": \"0px\"\n  }\n};\n\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h4\", null, \"Historico de Vendas do Item\", -1);\n\nconst _hoisted_3 = {\n  style: {\n    \"padding\": \"10px\"\n  }\n};\nconst _hoisted_4 = {\n  style: {\n    \"color\": \"red\"\n  }\n};\nconst _hoisted_5 = {\n  class: \"panel br-0 p-0 mt-0\"\n};\nconst _hoisted_6 = {\n  class: \"custom-table\"\n};\nconst _hoisted_7 = {\n  class: \"progress\"\n};\nconst _hoisted_8 = [\"aria-valuemax\"];\nconst _hoisted_9 = {\n  class: \"me-2 custom-dropdown dropdown btn-group\"\n};\nconst _hoisted_10 = {\n  class: \"btn dropdown-toggle btn-icon-only\",\n  href: \"#\",\n  role: \"button\",\n  id: \"pendingTask\",\n  \"data-bs-toggle\": \"dropdown\",\n  \"aria-haspopup\": \"true\",\n  \"aria-expanded\": \"false\"\n};\nconst _hoisted_11 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  style: {\n    \"width\": \"24px\",\n    \"height\": \"24px\"\n  },\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  \"stroke-width\": \"2\",\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\",\n  class: \"feather feather-more-horizontal\"\n};\n\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"circle\", {\n  cx: \"12\",\n  cy: \"12\",\n  r: \"1\"\n}, null, -1);\n\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"circle\", {\n  cx: \"19\",\n  cy: \"12\",\n  r: \"1\"\n}, null, -1);\n\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"circle\", {\n  cx: \"5\",\n  cy: \"12\",\n  r: \"1\"\n}, null, -1);\n\nconst _hoisted_15 = [_hoisted_12, _hoisted_13, _hoisted_14];\nconst _hoisted_16 = {\n  class: \"dropdown-menu dropdown-menu-end\"\n};\nconst _hoisted_17 = [\"onClick\"];\nconst _hoisted_18 = [\"onClick\"];\n\nconst _hoisted_19 = /*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"javascript:void(0);\",\n  class: \"dropdown-item\"\n}, \" Edit \", -1);\n\nconst _hoisted_20 = [_hoisted_19];\nconst _hoisted_21 = [\"onClick\"];\n\nconst _hoisted_22 = /*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"javascript:void(0);\",\n  class: \"dropdown-item\"\n}, \" Delete \", -1);\n\nconst _hoisted_23 = [_hoisted_22];\nimport { indexStore } from '../../store/indexStore';\nimport { onMounted, ref } from 'vue';\nimport axios from 'axios';\nimport { useMeta } from '@/composables/use-meta';\nexport default {\n  __name: 'ItensDetalhe',\n\n  setup(__props) {\n    useMeta({\n      title: 'Multiple Tables'\n    });\n    const store = indexStore();\n    const code_arr = ref([]); //table 1\n    //table 2\n\n    const columns1 = ref(['MES', 'COD_PRODUTO', 'NOME', 'QTDE', 'VALOR', 'CUSTO', 'LUCRO']);\n    const items1 = store.itensHistorico;\n    const table_option1 = ref({\n      perPage: 10,\n      perPageValues: [5, 10, 20, 50],\n      skin: 'table ',\n      columnsClasses: {\n        actions: 'actions text-center'\n      },\n      sortable: [],\n      pagination: {\n        nav: 'scroll',\n        chunk: 5\n      },\n      texts: {\n        count: 'Showing {from} to {to} of {count}',\n        filter: '',\n        filterPlaceholder: 'Search...',\n        limit: 'Results:'\n      },\n      sortable: ['MES', 'COD_PRODUTO', 'NOME', 'QTDE', 'VALOR', 'CUSTO', 'LUCRO'],\n      sortIcon: {\n        base: 'sort-icon-none',\n        up: 'sort-icon-asc',\n        down: 'sort-icon-desc'\n      },\n      resizableColumns: false\n    });\n    onMounted(() => {\n      bind_data();\n    });\n\n    const bind_data = async () => {\n      store.itensHistorico = [];\n      var result = await axios.get(store.baseApiHTTPS + '/mercadohistorico/' + store.ItensSelecionadoDemanda.CODIGO_BARRAS); //table 2\n\n      console.log(result.data);\n      store.itensHistorico = result.data;\n    };\n\n    function totalEstoque() {\n      if (store.itensCadastro) {\n        var somarProduto = store.itensCadastro.map(p => {\n          return p.VALOR_CUSTO * p.QTDE_ESTOQUE;\n        });\n        let totalProd = 0;\n\n        for (let i in somarProduto) {\n          totalProd += somarProduto[i];\n        }\n\n        return formataDinheiro(totalProd, 2);\n      }\n    }\n\n    function formataDinheiro(item) {\n      let venda = item;\n\n      if (!!venda && venda.toString().includes(\",\")) {\n        venda = venda.toString().replace(\",\", \".\");\n      }\n\n      return parseFloat(venda).toFixed(2).replace(\".\", \",\").replace(/(\\d)(?=(\\d{3})+\\,)/g, \"$1.\");\n    }\n\n    return (_ctx, _cache) => {\n      const _component_v_client_table = _resolveComponent(\"v-client-table\");\n\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"h3\", _hoisted_4, _toDisplayString(_unref(store).ItensSelecionadoDemanda.NOME) + \" - \" + _toDisplayString(_unref(store).ItensSelecionadoDemanda.CODIGO_BARRAS), 1)]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_v_client_table, {\n        data: _unref(store).itensHistorico,\n        columns: columns1.value,\n        options: table_option1.value\n      }, {\n        progress: _withCtx(props => [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", {\n          role: \"progressbar\",\n          \"aria-valuemin\": \"0\",\n          \"aria-valuemax\": props.row.progress.count,\n          \"aria-valuenow\": \"100\",\n          class: _normalizeClass([\"progress-bar\", 'bg-' + props.row.progress.class]),\n          style: _normalizeStyle({\n            width: props.row.progress.count + '%'\n          })\n        }, null, 14, _hoisted_8)])]),\n        salary: _withCtx(props => [_createTextVNode(\" $\" + _toDisplayString(props.row.salary), 1)]),\n        actions: _withCtx(props => [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"a\", _hoisted_10, [(_openBlock(), _createElementBlock(\"svg\", _hoisted_11, _hoisted_15))]), _createElementVNode(\"ul\", _hoisted_16, [_createElementVNode(\"li\", null, [_createElementVNode(\"a\", {\n          href: \"javascript:void(0);\",\n          class: \"dropdown-item\",\n          onClick: $event => _ctx.view_row1(props.row)\n        }, \" view \", 8, _hoisted_17)]), _createElementVNode(\"li\", {\n          onClick: $event => _ctx.selectItemEdit(props.row)\n        }, _hoisted_20, 8, _hoisted_18), _createElementVNode(\"li\", {\n          onClick: $event => _ctx.deleteItem(props.row)\n        }, _hoisted_23, 8, _hoisted_21)])])]),\n        _: 1\n      }, 8, [\"data\", \"columns\", \"options\"])])]), _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n        onClick: _cache[0] || (_cache[0] = $event => _unref(store).itensDetalhe = false)\n      }, \"Voltar\")])]);\n    };\n  }\n\n};","map":{"version":3,"mappings":"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","names":["indexStore","onMounted","ref","axios","useMeta","title","store","code_arr","columns1","items1","itensHistorico","table_option1","perPage","perPageValues","skin","columnsClasses","actions","sortable","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","sortIcon","base","up","down","resizableColumns","bind_data","result","get","baseApiHTTPS","ItensSelecionadoDemanda","CODIGO_BARRAS","console","log","data","totalEstoque","itensCadastro","somarProduto","map","p","VALOR_CUSTO","QTDE_ESTOQUE","totalProd","i","formataDinheiro","item","venda","toString","includes","replace","parseFloat","toFixed"],"sources":["/home/renato/projetos/pdvsmart/src/views/itens/ItensDetalhe.vue"],"sourcesContent":["<template>\n    <div class=\"layout-px-spacing\" style=\"margin-top: 0px;\">\n    <h4>Historico de Vendas do Item</h4>\n      \n  <div style=\"padding: 10px;\">\n    <h3 style=\"color: red;\">{{ store.ItensSelecionadoDemanda.NOME }} - {{  store.ItensSelecionadoDemanda.CODIGO_BARRAS }}</h3> \n  </div>\n\n  <div class=\"panel br-0 p-0 mt-0\">\n                    <div class=\"custom-table\">\n                        <v-client-table :data=\"store.itensHistorico\" :columns=\"columns1\" :options=\"table_option1\">\n                        \n                            <template #progress=\"props\">\n                                <div class=\"progress\">\n                                    <div\n                                        role=\"progressbar\"\n                                        aria-valuemin=\"0\"\n                                        :aria-valuemax=\"props.row.progress.count\"\n                                        aria-valuenow=\"100\"\n                                        class=\"progress-bar\"\n                                        :class=\"'bg-' + props.row.progress.class\"\n                                        :style=\"{ width: props.row.progress.count + '%' }\"\n                                    ></div>\n                                </div>\n                            </template>\n                            <template #salary=\"props\"> ${{ props.row.salary }} </template>\n                            <template #actions=\"props\">\n                                <div class=\"me-2 custom-dropdown dropdown btn-group\">\n                                    <a class=\"btn dropdown-toggle btn-icon-only\" href=\"#\" role=\"button\" id=\"pendingTask\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                                        <svg\n                                            xmlns=\"http://www.w3.org/2000/svg\"\n                                            style=\"width: 24px; height: 24px\"\n                                            width=\"24\"\n                                            height=\"24\"\n                                            viewBox=\"0 0 24 24\"\n                                            fill=\"none\"\n                                            stroke=\"currentColor\"\n                                            stroke-width=\"2\"\n                                            stroke-linecap=\"round\"\n                                            stroke-linejoin=\"round\"\n                                            class=\"feather feather-more-horizontal\"\n                                        >\n                                            <circle cx=\"12\" cy=\"12\" r=\"1\"></circle>\n                                            <circle cx=\"19\" cy=\"12\" r=\"1\"></circle>\n                                            <circle cx=\"5\" cy=\"12\" r=\"1\"></circle>\n                                        </svg>\n                                    </a>\n\n                                    <ul class=\"dropdown-menu dropdown-menu-end\">\n                                        <li>\n                                            <a href=\"javascript:void(0);\" class=\"dropdown-item\" @click=\"view_row1(props.row)\"> view </a>\n                                        </li>\n                                        <li @click=\"selectItemEdit(props.row)\">\n                                            <a href=\"javascript:void(0);\" class=\"dropdown-item\"> Edit </a>\n                                        </li>\n                                        <li @click=\"deleteItem(props.row)\">\n                                            <a href=\"javascript:void(0);\" class=\"dropdown-item\"> Delete </a>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </template>\n                        </v-client-table>\n                    </div>\n                </div>\n      \n      <div>\n      <button @click=\"store.itensDetalhe = false\" >Voltar</button>\n      </div>\n    </div>\n     \n</template>\n\n<script setup>\n    import {indexStore} from '../../store/indexStore' \n    import { onMounted, ref } from 'vue';\n    import axios from 'axios'\n    import { useMeta } from '@/composables/use-meta';\n   \n    useMeta({ title: 'Multiple Tables' });\n    const store = indexStore(); \n    const code_arr = ref([]);\n    //table 1\n   \n    \n    //table 2\n    const columns1 = ref(['MES', 'COD_PRODUTO', 'NOME' ,'QTDE','VALOR','CUSTO','LUCRO']);\n    const items1 = store.itensHistorico;\n    const table_option1 = ref({\n        perPage: 10,\n        perPageValues: [5, 10, 20, 50],\n        skin: 'table ',\n        columnsClasses: { actions: 'actions text-center' },\n        sortable: [],\n        pagination: { nav: 'scroll', chunk: 5 },\n        texts: {\n            count: 'Showing {from} to {to} of {count}',\n            filter: '',\n            filterPlaceholder: 'Search...',\n            limit: 'Results:',\n        },\n        sortable: ['MES', 'COD_PRODUTO', 'NOME', 'QTDE', 'VALOR','CUSTO','LUCRO' ],\n        sortIcon: {\n            base: 'sort-icon-none',\n            up: 'sort-icon-asc',\n            down: 'sort-icon-desc',\n        },\n        resizableColumns: false,\n    });\n\n    onMounted(() => {\n    \n            bind_data();\n      \n    });\n\n \n \n \n    const bind_data = async  () => { \n        store.itensHistorico =  []\n            var result = await axios.get(store.baseApiHTTPS+'/mercadohistorico/'+store.ItensSelecionadoDemanda.CODIGO_BARRAS)  \n        //table 2\n        console.log(result.data)\n        store.itensHistorico =  result.data\n    \n\n    }\n \n\n \n \n \n\n \n\n  \n function totalEstoque() {\n    if (store.itensCadastro){\n        var somarProduto = store.itensCadastro.map(p =>{\n                return (p.VALOR_CUSTO * p.QTDE_ESTOQUE)\n              } )\n             \n\n  let totalProd = 0\n  for(let i in somarProduto) {\n           totalProd += somarProduto[i] \n    }\n    \n          return formataDinheiro(totalProd,2)\n    }\n\n}\n  \nfunction formataDinheiro(item) {\n         let venda = item;\n         if (!!venda && venda.toString().includes(\",\")) {\n           venda = venda.toString().replace(\",\", \".\");\n         }\n         return parseFloat(venda)\n           .toFixed(2)\n           .replace(\".\", \",\")\n           .replace(/(\\d)(?=(\\d{3})+\\,)/g, \"$1.\");\n    }\n\n</script>\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"row align-items-center form-group\",\n  to: \"#breadcrumb\"\n};\nconst _hoisted_2 = {\n  class: \"form-group col-md-2\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"col-form-label\"\n}, \"Empresa\", -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = [\"value\"];\n\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"col-form-label\"\n}, \"Data Inicial\", -1\n/* HOISTED */\n);\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"col-form-label\"\n}, \"Data Final\", -1\n/* HOISTED */\n);\n\nconst _hoisted_7 = {\n  class: \"form-group col-md-2 align-items-center\"\n};\nconst _hoisted_8 = {\n  key: 1,\n  style: {\n    \"margin-left\": \"10px\",\n    \"margin-top\": \"-45px\",\n    \"font-size\": \"15px\",\n    \"color\": \"red\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [$setup.storeLogin.empresas?.sucess == 'true' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _withDirectives(_createElementVNode(\"select\", {\n    class: \"mb-4 form-control flatpickr active w-100 form-select\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.store.filtro.empresa = $event),\n    style: {\n      \"margin-top\": \"-15px\"\n    }\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.storeLogin.empresas.dadosempresa, (emp, indexEmp) => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: indexEmp,\n      value: emp.identificacaointegracao\n    }, _toDisplayString(emp.identificacaointegracao), 9\n    /* TEXT, PROPS */\n    , _hoisted_4);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))], 512\n  /* NEED_PATCH */\n  ), [[_vModelSelect, $setup.store.filtro.empresa]])]), _createElementVNode(\"div\", {\n    class: _normalizeClass([\"form-group col-md-2\", $setup.store.detectar_mobile() ? 'filtrosMobile' : 'filtrosWeb'])\n  }, [_hoisted_5, _withDirectives(_createElementVNode(\"input\", {\n    type: \"date\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.store.filtro.dataInicial = $event),\n    \"data-date-format\": \"DD MM YYYY\",\n    class: _normalizeClass([\"mb-4 form-control flatpickr active w-100\", $setup.store.detectar_mobile() ? 'filtrosMobile' : 'filtrosWeb']),\n    style: {\n      \"margin-top\": \"-15px\"\n    }\n  }, null, 2\n  /* CLASS */\n  ), [[_vModelText, $setup.store.filtro.dataInicial]])], 2\n  /* CLASS */\n  ), _createElementVNode(\"div\", {\n    class: _normalizeClass([\"form-group col-md-2\", $setup.store.detectar_mobile() ? 'filtrosMobile' : 'filtrosWeb'])\n  }, [_hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    type: \"date\",\n    \"data-date-format\": \"DD MM YYYY\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.store.filtro.dataFinal = $event),\n    class: _normalizeClass([\"mb-4 form-control flatpickr active w-100\", $setup.store.detectar_mobile() ? 'filtrosMobile' : 'filtrosWeb']),\n    style: {\n      \"margin-top\": \"-15px\"\n    }\n  }, null, 2\n  /* CLASS */\n  ), [[_vModelText, $setup.store.filtro.dataFinal]])], 2\n  /* CLASS */\n  ), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", {\n    class: _normalizeClass([\"btn btn-primary mb-4 form-control active w-300\", $setup.store.detectar_mobile() ? 'filtrosMobileButton' : 'filtrosWebButton']),\n    onClick: _cache[3] || (_cache[3] = $event => $setup.filtros())\n  }, \" ATUALIZAR \", 2\n  /* CLASS */\n  )])])) : _createCommentVNode(\"v-if\", true), $setup.store.dataErrada ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, \" Data Final não pode ser menor que a Data Incial... \")) : _createCommentVNode(\"v-if\", true)], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":";;;EAEQA,KAAK,EAAC;EAAqCC,EAAE,EAAC;;;EACzCD,KAAK,EAAC;;;gCACPE,oBAA6C,OAA7C,EAA6C;EAAtCF,KAAK,EAAC;AAAgC,CAA7C,EAA8B,SAA9B,EAAqC;AAAA;AAArC;;;;gCAkBAE,oBAEqB,OAFrB,EAEqB;EAFdF,KAAK,EAAC;AAEQ,CAFrB,EAEC,cAFD,EAEa;AAAA;AAFb;;gCAeAE,oBAEmB,OAFnB,EAEmB;EAFZF,KAAK,EAAC;AAEM,CAFnB,EAEC,YAFD,EAEW;AAAA;AAFX;;;EAYCA,KAAK,EAAC;;;;EAWXG,KAA2E,EAA3E;IAAA;IAAA;IAAA;IAAA;EAAA;;;6DA3DMC,kBAAWC,QAAX,EAAqBC,MAArB,IAA2B,wBAAvCC,oBAwDM,KAxDN,cAwDM,CAtDAL,oBAaM,KAbN,cAaM,CAZFM,UAYE,kBAVFN,oBASS,QATT,EASS;IATCF,KAAK,EAAC,sDASP;+DARQI,aAAMK,MAAN,CAAaC,UAAOC,OAQ5B;IAPDR,KAA2B,EAA3B;MAAA;IAAA;EAOC,CATT,sBAIQI,oBAISK,SAJT,EAIS,IAJT,EAISC,YAHeT,kBAAWC,QAAX,CAAoBS,YAGnC,EAH+C,CAAjDC,GAAiD,EAA5CC,QAA4C,KAApC;yBADpBT,oBAIS,QAJT,EAIS;MAFRU,GAAG,EAAED,QAEG;MADRE,KAAK,EAAEH,GAAG,CAACI;IACH,CAJT,mBAGuCJ,GAAG,CAACI,wBAH3C,EAGkE;IAAA;IAHlE,EAGkEC,UAHlE;GAIS,CAJT;;EAAA,GAJR;;EAAA,oBACiBhB,aAAMK,MAAN,CAAaC,UAS5B,CAbN,CAsDA,EAvCAR,oBAaM,KAbN,EAaM;IAbDF,KAAK,mBAAC,qBAAD,EACMI,aAAMiB,eAAN,EADgB,GACK,eADL,GACK,YAD3B;EAaJ,CAbN,GAIIC,4BAGApB,oBAKC,OALD,EAKC;IALMqB,IAAI,EAAC,MAKX;+DAL2BnB,aAAMK,MAAN,CAAae,cAAWb,OAKnD;IALsD,oBAAiB,YAKvE;IAJDX,KAAK,mBAAC,0CAAD,EACUI,aAAMiB,eAAN,EADiC,GACZ,eADY,GACZ,YAD/B,EAIJ;IAFDlB,KAA2B,EAA3B;MAAA;IAAA;EAEC,CALD;;EAAA,kBAA4BC,aAAMK,MAAN,CAAae,eAP7C;;EAAA,CAuCA,EAxBAtB,oBAcM,KAdN,EAcM;IAdDF,KAAK,mBAAC,qBAAD,EACSI,aAAMiB,eAAN,EADa,GACQ,eADR,GACQ,YAD9B;EAcJ,CAdN,GAIII,4BAGAvB,oBAKK,OALL,EAKK;IAJDqB,IAAI,EAAC,MAIJ;IAJW,oBAAiB,YAI5B;+DAJkDnB,aAAMK,MAAN,CAAaiB,YAASf,OAIxE;IAHDX,KAAK,mBAAC,0CAAD,EACUI,aAAMiB,eAAN,EADiC,GACZ,eADY,GACZ,YAD/B,EAGJ;IADDlB,KAA2B,EAA3B;MAAA;IAAA;EACC,CALL;;EAAA,kBACuDC,aAAMK,MAAN,CAAaiB,aARxE;;EAAA,CAwBA,EARAxB,oBAMM,KANN,cAMM,CALHA,oBAIO,KAJP,EAIO;IAJFF,KAAK,mBAAC,gDAAD,EACUI,aAAMiB,eAAN,EADuC,GAClB,qBADkB,GAClB,kBAD/B,EAIH;IAFDM,OAAK,sCAAEvB,gBAAF;EAEJ,CAJP,EAEwB,aAFxB,EAIC;EAAA;EAJD,CAKG,CANN,CAQA,CAxDN,wCA0DWA,aAAMwB,4BAAjBrB,oBAIU,KAJV,cAEO,sDAFP","names":["class","to","_createElementVNode","style","$setup","empresas","sucess","_createElementBlock","_hoisted_3","filtro","empresa","$event","_Fragment","_renderList","dadosempresa","emp","indexEmp","key","value","identificacaointegracao","_hoisted_4","detectar_mobile","_hoisted_5","type","dataInicial","_hoisted_6","dataFinal","onClick","dataErrada"],"sourceRoot":"","sources":["/home/renato/projetos/pdvsmart/src/views/relatorios/Filtros.vue"],"sourcesContent":["<template>\n  <div  v-if=\"storeLogin.empresas?.sucess == 'true'\"\n        class=\"row align-items-center form-group \" to=\"#breadcrumb\" >\n        <div class=\"form-group col-md-2\">\n            <label class=\"col-form-label\">Empresa</label>\n            \n            <select   class=\"mb-4 form-control flatpickr active w-100 form-select\"   \n                    v-model=\"store.filtro.empresa\"            \n                    style=\" margin-top: -15px;\"\n                    >\n                    <option \n                    v-for=\"emp, indexEmp in storeLogin.empresas.dadosempresa\"\n                    :key=\"indexEmp\"\n                    :value=\"emp.identificacaointegracao\">{{emp.identificacaointegracao}}\n                    </option>               \n            </select>\n        </div> \n\n        <div class=\"form-group col-md-2\"\n         v-bind:class=\"(store.detectar_mobile()) ? 'filtrosMobile' : 'filtrosWeb'\"\n        \n        >\n            <label class=\"col-form-label\"\n        \n            >Data Inicial</label>              \n            <input type=\"date\" v-model=\"store.filtro.dataInicial\"  data-date-format=\"DD MM YYYY\"\n            class=\"mb-4 form-control flatpickr active w-100\" \n            v-bind:class=\"(store.detectar_mobile()) ? 'filtrosMobile' : 'filtrosWeb'\"\n            style=\" margin-top: -15px;\"\n        \n            >\n        </div> \n\n        <div class=\"form-group col-md-2\"\n            v-bind:class=\"(store.detectar_mobile()) ? 'filtrosMobile' : 'filtrosWeb'\"\n        \n        >\n            <label class=\"col-form-label\"\n         \n            >Data Final</label>            \n            <input \n                type=\"date\" data-date-format=\"DD MM YYYY\" v-model=\"store.filtro.dataFinal\"  \n                class=\"mb-4 form-control flatpickr active w-100\"\n                v-bind:class=\"(store.detectar_mobile()) ? 'filtrosMobile' : 'filtrosWeb'\"\n                style=\" margin-top: -15px;\"\n                > \n                \n        </div> \n\n        <div class=\"form-group col-md-2 align-items-center \">    \n           <div class=\"btn btn-primary mb-4 form-control active w-300\" \n                v-bind:class=\"(store.detectar_mobile()) ? 'filtrosMobileButton' : 'filtrosWebButton'\"                \n                @click=\"filtros()\">\n               ATUALIZAR\n            </div>\n        </div> \n \n  </div>\n\n  <div v-if=\"store.dataErrada\"\n        style=\" margin-left: 10px; margin-top: -45px; font-size: 15px; color: red;\" \n        >\n        Data Final não pode ser menor que a Data Incial...\n      </div>\n</template>\n\n<script setup> \n    import { indexStore, useUserStore } from '../../store/indexStore'   \n    const store      = indexStore(); \n    const storeLogin = useUserStore()  \n\n  store.filtro= { \n            empresa: 'CENTRAL',\n            dataInicial:  dataFormatada(new Date()),\n            dataFinal:    dataFormatada(new Date())\n        }\n\n    function filtros() {\n    store.dataErrada = false\n    if(storeLogin.empresas?.sucess && store.filtro.dataFinal >= store.filtro.dataInicial){\n        store.relLoja = []\n        store.relVendedores = []\n        store.relAnual = []\n        store.relContas = []\n        store.Progress = true        \n    getTypeRel(storeLogin.empresas.databasecliente,store.filtro.empresa,store.filtro.dataInicial,store.filtro.dataFinal,8)\n    }else{\n        store.dataErrada = true\n    }\n   }\n\n   async function getTypeRel (DataBaseCliente,ComboEmpresas,DataInicial,DataFinal,TypeRel) {\n                let data = JSON.stringify({\n                \"databasecliente\": DataBaseCliente,\n                \"comboempresas\": ComboEmpresas,\n                \"datainicial\": DataInicial,\n                \"datafinal\": DataFinal,\n                \"typerel\": TypeRel\n                });\n    \n                console.log('TypeRel: '+TypeRel +' DataInicial: '+DataInicial+' DataInicial: '+DataFinal)\n    \n                let config = {\n                method: 'post',\n                maxBodyLength: Infinity,\n                url:  store.ulrprincipal+'/evento/report',\n                headers: { \n                    'Content-Type': 'application/json', \n                    'Authorization': 'Basic dGVzdHNlcnZlcjp0ZXN0c2VydmVy'\n                },\n                data : data\n                };\n    \n                await axios.request(config)\n                .then((response) => {   \n                    if(TypeRel == 8){ \n                        store.relLoja = response.data.dados \n\n                        selectEmpresa(0)\n\n                        console.log(store.dadosRel)\n                    }                \n                    if(store.detectar_mobile()){\n                        window.scrollTo(0, 300);\n                        console.log('window.scrollTo')\n                    }\n                    store.Progress = false\n                    return response  \n                \n                })\n                .catch((error) => {\n                console.log(error);\n                store.Progress = false\n                });  \n        } \n\n        function dataFormatada(d){ \n        var data =  new Date(d),\n            dia  = data.getDate().toString(),\n            diaF = (dia.length == 1) ? '0'+dia : dia,\n            mes  = (data.getMonth()+1).toString(), //+1 pois no getMonth Janeiro começa com zero.\n            mesF = (mes.length == 1) ? '0'+mes : mes,\n            anoF = data.getFullYear();\n        return anoF+\"-\"+mesF+\"-\"+diaF;\n        }\n        \n</script>\n\n<style>    \n.filtrosWeb { \n min-height: 43px;        \n}\n.filtrosMobile { \n margin-top: -30px;    \n min-height:  43px;    \n}\n.filtrosWebButton { \n min-height: 43px;   \n margin-top: 23px;       \n}\n.filtrosMobileButton { \n margin-top: -20px;    \n min-height:  43px;    \n}\n</style>"]},"metadata":{},"sourceType":"module"}
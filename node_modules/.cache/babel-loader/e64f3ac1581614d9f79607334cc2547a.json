{"ast":null,"code":"import { indexStore, useUserStore } from '../../store/indexStore';\nexport default {\n  __name: 'Filtros',\n\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n\n    const store = indexStore();\n    const storeLogin = useUserStore();\n    store.filtro = {\n      empresa: 'CENTRAL',\n      dataInicial: dataFormatada(new Date()),\n      dataFinal: dataFormatada(new Date())\n    };\n\n    function filtros() {\n      store.dataErrada = false;\n\n      if (storeLogin.empresas?.sucess && store.filtro.dataFinal >= store.filtro.dataInicial) {\n        store.relLoja = [];\n        store.relVendedores = [];\n        store.relAnual = [];\n        store.relContas = [];\n        store.Progress = true;\n        getTypeRel(storeLogin.empresas.databasecliente, store.filtro.empresa, store.filtro.dataInicial, store.filtro.dataFinal, 8);\n      } else {\n        store.dataErrada = true;\n      }\n    }\n\n    async function getTypeRel(DataBaseCliente, ComboEmpresas, DataInicial, DataFinal, TypeRel) {\n      let data = JSON.stringify({\n        \"databasecliente\": DataBaseCliente,\n        \"comboempresas\": ComboEmpresas,\n        \"datainicial\": DataInicial,\n        \"datafinal\": DataFinal,\n        \"typerel\": TypeRel\n      });\n      console.log('TypeRel: ' + TypeRel + ' DataInicial: ' + DataInicial + ' DataInicial: ' + DataFinal);\n      let config = {\n        method: 'post',\n        maxBodyLength: Infinity,\n        url: store.ulrprincipal + '/evento/report',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Basic dGVzdHNlcnZlcjp0ZXN0c2VydmVy'\n        },\n        data: data\n      };\n      await axios.request(config).then(response => {\n        if (TypeRel == 8) {\n          store.relLoja = response.data.dados;\n          selectEmpresa(0);\n          console.log(store.dadosRel);\n        }\n\n        if (store.detectar_mobile()) {\n          window.scrollTo(0, 300);\n          console.log('window.scrollTo');\n        }\n\n        store.Progress = false;\n        return response;\n      }).catch(error => {\n        console.log(error);\n        store.Progress = false;\n      });\n    }\n\n    function dataFormatada(d) {\n      var data = new Date(d),\n          dia = data.getDate().toString(),\n          diaF = dia.length == 1 ? '0' + dia : dia,\n          mes = (data.getMonth() + 1).toString(),\n          //+1 pois no getMonth Janeiro começa com zero.\n      mesF = mes.length == 1 ? '0' + mes : mes,\n          anoF = data.getFullYear();\n      return anoF + \"-\" + mesF + \"-\" + diaF;\n    }\n\n    const __returned__ = {\n      store,\n      storeLogin,\n      filtros,\n      getTypeRel,\n      dataFormatada,\n\n      get indexStore() {\n        return indexStore;\n      },\n\n      get useUserStore() {\n        return useUserStore;\n      }\n\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"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","names":["indexStore","useUserStore","store","storeLogin","filtro","empresa","dataInicial","dataFormatada","Date","dataFinal","filtros","dataErrada","empresas","sucess","relLoja","relVendedores","relAnual","relContas","Progress","getTypeRel","databasecliente","DataBaseCliente","ComboEmpresas","DataInicial","DataFinal","TypeRel","data","JSON","stringify","console","log","config","method","maxBodyLength","Infinity","url","ulrprincipal","headers","axios","request","then","response","dados","selectEmpresa","dadosRel","detectar_mobile","window","scrollTo","catch","error","d","dia","getDate","toString","diaF","length","mes","getMonth","mesF","anoF","getFullYear"],"sources":["/home/renato/projetos/pdvsmart/src/views/relatorios/Filtros.vue"],"sourcesContent":["<template>\n  <div  v-if=\"storeLogin.empresas?.sucess == 'true'\"\n        class=\"row align-items-center form-group \" to=\"#breadcrumb\" >\n        <div class=\"form-group col-md-2\">\n            <label class=\"col-form-label\">Empresa</label>\n            \n            <select   class=\"mb-4 form-control flatpickr active w-100 form-select\"   \n                    v-model=\"store.filtro.empresa\"            \n                    style=\" margin-top: -15px;\"\n                    >\n                    <option \n                    v-for=\"emp, indexEmp in storeLogin.empresas.dadosempresa\"\n                    :key=\"indexEmp\"\n                    :value=\"emp.identificacaointegracao\">{{emp.identificacaointegracao}}\n                    </option>               \n            </select>\n        </div> \n\n        <div class=\"form-group col-md-2\"\n         v-bind:class=\"(store.detectar_mobile()) ? 'filtrosMobile' : 'filtrosWeb'\"\n        \n        >\n            <label class=\"col-form-label\"\n        \n            >Data Inicial</label>              \n            <input type=\"date\" v-model=\"store.filtro.dataInicial\"  data-date-format=\"DD MM YYYY\"\n            class=\"mb-4 form-control flatpickr active w-100\" \n            v-bind:class=\"(store.detectar_mobile()) ? 'filtrosMobile' : 'filtrosWeb'\"\n            style=\" margin-top: -15px;\"\n        \n            >\n        </div> \n\n        <div class=\"form-group col-md-2\"\n            v-bind:class=\"(store.detectar_mobile()) ? 'filtrosMobile' : 'filtrosWeb'\"\n        \n        >\n            <label class=\"col-form-label\"\n         \n            >Data Final</label>            \n            <input \n                type=\"date\" data-date-format=\"DD MM YYYY\" v-model=\"store.filtro.dataFinal\"  \n                class=\"mb-4 form-control flatpickr active w-100\"\n                v-bind:class=\"(store.detectar_mobile()) ? 'filtrosMobile' : 'filtrosWeb'\"\n                style=\" margin-top: -15px;\"\n                > \n                \n        </div> \n\n        <div class=\"form-group col-md-2 align-items-center \">    \n           <div class=\"btn btn-primary mb-4 form-control active w-300\" \n                v-bind:class=\"(store.detectar_mobile()) ? 'filtrosMobileButton' : 'filtrosWebButton'\"                \n                @click=\"filtros()\">\n               ATUALIZAR\n            </div>\n        </div> \n \n  </div>\n\n  <div v-if=\"store.dataErrada\"\n        style=\" margin-left: 10px; margin-top: -45px; font-size: 15px; color: red;\" \n        >\n        Data Final não pode ser menor que a Data Incial...\n      </div>\n</template>\n\n<script setup> \n    import { indexStore, useUserStore } from '../../store/indexStore'   \n    const store      = indexStore(); \n    const storeLogin = useUserStore()  \n\n  store.filtro= { \n            empresa: 'CENTRAL',\n            dataInicial:  dataFormatada(new Date()),\n            dataFinal:    dataFormatada(new Date())\n        }\n\n    function filtros() {\n    store.dataErrada = false\n    if(storeLogin.empresas?.sucess && store.filtro.dataFinal >= store.filtro.dataInicial){\n        store.relLoja = []\n        store.relVendedores = []\n        store.relAnual = []\n        store.relContas = []\n        store.Progress = true        \n    getTypeRel(storeLogin.empresas.databasecliente,store.filtro.empresa,store.filtro.dataInicial,store.filtro.dataFinal,8)\n    }else{\n        store.dataErrada = true\n    }\n   }\n\n   async function getTypeRel (DataBaseCliente,ComboEmpresas,DataInicial,DataFinal,TypeRel) {\n                let data = JSON.stringify({\n                \"databasecliente\": DataBaseCliente,\n                \"comboempresas\": ComboEmpresas,\n                \"datainicial\": DataInicial,\n                \"datafinal\": DataFinal,\n                \"typerel\": TypeRel\n                });\n    \n                console.log('TypeRel: '+TypeRel +' DataInicial: '+DataInicial+' DataInicial: '+DataFinal)\n    \n                let config = {\n                method: 'post',\n                maxBodyLength: Infinity,\n                url:  store.ulrprincipal+'/evento/report',\n                headers: { \n                    'Content-Type': 'application/json', \n                    'Authorization': 'Basic dGVzdHNlcnZlcjp0ZXN0c2VydmVy'\n                },\n                data : data\n                };\n    \n                await axios.request(config)\n                .then((response) => {   \n                    if(TypeRel == 8){ \n                        store.relLoja = response.data.dados \n\n                        selectEmpresa(0)\n\n                        console.log(store.dadosRel)\n                    }                \n                    if(store.detectar_mobile()){\n                        window.scrollTo(0, 300);\n                        console.log('window.scrollTo')\n                    }\n                    store.Progress = false\n                    return response  \n                \n                })\n                .catch((error) => {\n                console.log(error);\n                store.Progress = false\n                });  \n        } \n\n        function dataFormatada(d){ \n        var data =  new Date(d),\n            dia  = data.getDate().toString(),\n            diaF = (dia.length == 1) ? '0'+dia : dia,\n            mes  = (data.getMonth()+1).toString(), //+1 pois no getMonth Janeiro começa com zero.\n            mesF = (mes.length == 1) ? '0'+mes : mes,\n            anoF = data.getFullYear();\n        return anoF+\"-\"+mesF+\"-\"+diaF;\n        }\n        \n</script>\n\n<style>    \n.filtrosWeb { \n min-height: 43px;        \n}\n.filtrosMobile { \n margin-top: -30px;    \n min-height:  43px;    \n}\n.filtrosWebButton { \n min-height: 43px;   \n margin-top: 23px;       \n}\n.filtrosMobileButton { \n margin-top: -20px;    \n min-height:  43px;    \n}\n</style>"]},"metadata":{},"sourceType":"module"}
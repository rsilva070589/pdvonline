{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport '@/assets/sass/widgets/widgets.scss';\nimport { onMounted, ref, computed } from 'vue';\nimport { useStore } from 'vuex';\nimport { indexStore, useUserStore } from '../../store/indexStore';\nimport ApexChart from 'vue3-apexcharts';\nimport { useMeta } from '@/composables/use-meta';\nimport axios from 'axios';\nimport { useRouter } from \"vue-router\";\nimport Progress from '@/components/Progress.vue';\nexport default {\n  __name: 'Dre',\n\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n\n    useMeta({\n      title: 'Relatorios'\n    });\n    const storeLogin = useUserStore();\n    const router = useRouter();\n    const store = indexStore();\n    login();\n    store.carregando = false;\n    store.dadosRel = [];\n\n    function login() {\n      switch (storeLogin.empresas?.sucess) {\n        case true:\n          console.log('usuario logado');\n          break;\n\n        case 'true':\n          console.log('usuario logado');\n          break;\n\n        default:\n          console.log('precisa fazer login');\n          router.push('/auth/login');\n      }\n    }\n\n    function logout() {\n      storeLogin.empresas.sucess = false;\n      console.log(storeLogin.empresas.sucess);\n      router.push('/auth/login');\n    }\n\n    onMounted(() => {\n      store.indexVendas = 0;\n\n      async function getTypeRel(DataBaseCliente, ComboEmpresas, DataInicial, DataFinal, TypeRel) {\n        let data = JSON.stringify({\n          \"databasecliente\": DataBaseCliente,\n          \"comboempresas\": ComboEmpresas,\n          \"datainicial\": DataInicial,\n          \"datafinal\": DataFinal,\n          \"typerel\": TypeRel\n        });\n        console.log('TypeRel: ' + TypeRel + ' DataInicial: ' + DataInicial + ' DataInicial: ' + DataFinal);\n        let config = {\n          method: 'post',\n          maxBodyLength: Infinity,\n          url: store.ulrprincipal + '/evento/report',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Basic dGVzdHNlcnZlcjp0ZXN0c2VydmVy'\n          },\n          data: data\n        };\n        await axios.request(config).then(response => {\n          if (TypeRel == 8) {\n            store.relLoja = response.data.dados;\n            store.dadosRel = [{\n              TIPO: 'Total Vendas Bruta',\n              DADOS: store.relLoja[store.indexVendas]?.vendabruta\n            }, {\n              TIPO: 'Descontos',\n              DADOS: store.relLoja[store.indexVendas]?.descontos\n            }, {\n              TIPO: 'Comissões (CS)',\n              DADOS: store.relLoja[store.indexVendas]?.comissoes\n            }, {\n              TIPO: 'Total Vendas Liquida',\n              DADOS: store.relLoja[store.indexVendas]?.vendaliquida\n            }, {\n              TIPO: 'CRM (Custo Merc Vendida)',\n              DADOS: store.relLoja[store.indexVendas]?.customercadoriavendida\n            }, {\n              TIPO: 'Taxas Cartão / Pgto',\n              DADOS: store.relLoja[store.indexVendas]?.taxacartao\n            }, {\n              TIPO: 'Lucro Bruto Vendas',\n              DADOS: store.relLoja[store.indexVendas]?.lucrobrutosobrevenda\n            }, {\n              TIPO: 'Despesas do Periodo (DP)',\n              DADOS: store.relLoja[store.indexVendas]?.despesaperiodo\n            }];\n            console.log(store.dadosRel);\n          }\n\n          if (store.detectar_mobile()) {\n            window.scrollTo(0, 300);\n            console.log('window.scrollTo');\n          }\n\n          store.Progress = false;\n          return response;\n        }).catch(error => {\n          console.log(error);\n          store.Progress = false;\n        });\n      }\n\n      store.filtro = {\n        empresa: 'CENTRAL',\n        dataInicial: dataFormatada('2023-09-01'),\n        dataFinal: dataFormatada(new Date())\n      };\n\n      function filtros() {\n        if (storeLogin.empresas?.sucess) {\n          store.relLoja = [];\n          store.relVendedores = [];\n          store.relAnual = [];\n          store.relContas = [];\n          store.Progress = true;\n          getTypeRel(storeLogin.empresas.databasecliente, store.filtro.empresa, store.filtro.dataInicial, store.filtro.dataFinal, 8);\n        }\n      }\n\n      filtros();\n    });\n\n    function dataFormatada(d) {\n      var data = new Date(d),\n          dia = data.getDate().toString(),\n          diaF = dia.length == 1 ? '0' + dia : dia,\n          mes = (data.getMonth() + 1).toString(),\n          //+1 pois no getMonth Janeiro começa com zero.\n      mesF = mes.length == 1 ? '0' + mes : mes,\n          anoF = data.getFullYear();\n      return anoF + \"-\" + mesF + \"-\" + diaF;\n    }\n\n    function somaValor(array) {\n      if (array) {\n        var arr = array;\n        var sum = 0;\n\n        for (var i = 0; i < arr.length; i++) {\n          sum += arr[i];\n        }\n      }\n\n      return sum;\n    }\n\n    function formataDinheiro(item) {\n      let venda = item;\n\n      if (!!venda && venda.toString().includes(\",\")) {\n        venda = venda.toString().replace(\",\", \".\");\n      }\n\n      return parseFloat(venda).toFixed(2).replace(\".\", \",\").replace(/(\\d)(?=(\\d{3})+\\,)/g, \"$1.\");\n    } //table 2\n\n\n    const columns1 = ref(['TIPO', 'DADOS']);\n    const items1 = store.dadosRel;\n    const table_option1 = ref({\n      perPage: 10,\n      perPageValues: [5, 10, 20, 50],\n      skin: 'table ',\n      columnsClasses: {\n        actions: 'actions text-center'\n      },\n      sortable: [],\n      pagination: {\n        nav: 'scroll',\n        chunk: 5\n      },\n      texts: {\n        count: 'Showing {from} to {to} of {count}',\n        filter: '',\n        filterPlaceholder: 'Search...',\n        limit: 'Results:'\n      },\n      sortable: ['TIPO', 'DADOS'],\n      sortIcon: {\n        base: 'sort-icon-none',\n        up: 'sort-icon-asc',\n        down: 'sort-icon-desc'\n      },\n      resizableColumns: false\n    });\n    const __returned__ = {\n      storeLogin,\n      router,\n      store,\n      login,\n      logout,\n      dataFormatada,\n      somaValor,\n      formataDinheiro,\n      columns1,\n      items1,\n      table_option1,\n      onMounted,\n      ref,\n      computed,\n\n      get useStore() {\n        return useStore;\n      },\n\n      get indexStore() {\n        return indexStore;\n      },\n\n      get useUserStore() {\n        return useUserStore;\n      },\n\n      get ApexChart() {\n        return ApexChart;\n      },\n\n      get useMeta() {\n        return useMeta;\n      },\n\n      get axios() {\n        return axios;\n      },\n\n      get useRouter() {\n        return useRouter;\n      },\n\n      Progress\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"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","names":["onMounted","ref","computed","useStore","indexStore","useUserStore","ApexChart","useMeta","axios","useRouter","Progress","title","storeLogin","router","store","login","carregando","dadosRel","empresas","sucess","console","log","push","logout","indexVendas","getTypeRel","DataBaseCliente","ComboEmpresas","DataInicial","DataFinal","TypeRel","data","JSON","stringify","config","method","maxBodyLength","Infinity","url","ulrprincipal","headers","request","then","response","relLoja","dados","TIPO","DADOS","vendabruta","descontos","comissoes","vendaliquida","customercadoriavendida","taxacartao","lucrobrutosobrevenda","despesaperiodo","detectar_mobile","window","scrollTo","catch","error","filtro","empresa","dataInicial","dataFormatada","dataFinal","Date","filtros","relVendedores","relAnual","relContas","databasecliente","d","dia","getDate","toString","diaF","length","mes","getMonth","mesF","anoF","getFullYear","somaValor","array","arr","sum","i","formataDinheiro","item","venda","includes","replace","parseFloat","toFixed","columns1","items1","table_option1","perPage","perPageValues","skin","columnsClasses","actions","sortable","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","sortIcon","base","up","down","resizableColumns"],"sources":["/home/renato/projetos/pdvsmart/src/views/relatorios/Dre.vue"],"sourcesContent":["<template> \n \n \n    <div v-if=\"storeLogin.empresas?.sucess == 'true'\">  \n        <div class=\"layout-px-spacing dash_2\">\n            <teleport to=\"#breadcrumb\">\n                <ul class=\"navbar-nav flex-row\">\n                    <li>\n                        <div class=\"page-header\">\n                            <nav class=\"breadcrumb-one\" aria-label=\"breadcrumb\">\n                                <ol class=\"breadcrumb\">\n                                    <li class=\"breadcrumb-item\"><a href=\"javascript:;\">Relatorios</a></li>\n                                    <li class=\"breadcrumb-item active\" aria-current=\"page\"><span>Dre</span></li>\n                                </ol>\n                            </nav>\n                        </div>\n                    </li>\n                </ul>\n            </teleport> \n            \n      <div  v-if=\"storeLogin.empresas?.sucess == 'true'\"\n            class=\"row align-items-center form-group \" to=\"#breadcrumb\" >\n            <div class=\"form-group col-md-2\">\n                <label class=\"col-form-label\">Empresa</label>\n                \n                <select   class=\"mb-4 form-control flatpickr active w-100 form-select\"   \n                        v-model=\"store.filtro.empresa\"            \n                        style=\" margin-top: -15px;\"\n                        >\n                        <option \n                        v-for=\"emp, indexEmp in storeLogin.empresas.dadosempresa\"\n                        :key=\"indexEmp\"\n                        :value=\"emp.identificacaointegracao\">{{emp.identificacaointegracao}}\n                        </option>               \n                </select>\n            </div> \n    \n            <div class=\"form-group col-md-2\"\n             v-bind:class=\"(store.detectar_mobile()) ? 'filtrosMobile' : 'filtrosWeb'\"\n            \n            >\n                <label class=\"col-form-label\"\n            \n                >Data Inicial</label>              \n                <input type=\"date\" v-model=\"store.filtro.dataInicial\"  data-date-format=\"DD MM YYYY\"\n                class=\"mb-4 form-control flatpickr active w-100\" \n                v-bind:class=\"(store.detectar_mobile()) ? 'filtrosMobile' : 'filtrosWeb'\"\n                style=\" margin-top: -15px;\"\n            \n                >\n            </div> \n    \n            <div class=\"form-group col-md-2\"\n                v-bind:class=\"(store.detectar_mobile()) ? 'filtrosMobile' : 'filtrosWeb'\"\n            \n            >\n                <label class=\"col-form-label\"\n             \n                >Data Final</label>            \n                <input \n                    type=\"date\" data-date-format=\"DD MM YYYY\" v-model=\"store.filtro.dataFinal\"  \n                    class=\"mb-4 form-control flatpickr active w-100\"\n                    v-bind:class=\"(store.detectar_mobile()) ? 'filtrosMobile' : 'filtrosWeb'\"\n                    style=\" margin-top: -15px;\"\n                    > \n                    \n            </div> \n    \n            <div class=\"form-group col-md-2 align-items-center \">    \n               <div class=\"btn btn-primary mb-4 form-control active w-300\" \n                    v-bind:class=\"(store.detectar_mobile()) ? 'filtrosMobileButton' : 'filtrosWebButton'\"                \n                    @click=\"filtros()\">\n                   ATUALIZAR\n                </div>\n            </div> \n     \n      </div>\n    \n    <Progress v-if=\"store.Progress && storeLogin.empresas?.sucess == true\"/> \n    \n      <div v-if=\"   !store.relVendedores?.length > 0 \n                 && !store.Progress\n                 && !store.relLoja?.length > 0 \n                 && !store.relAnual?.length > 0 \n                 && !store.relContas?.length > 0 \n                 && !store.relLoja?.length > 0   \n                 \"\n        style=\"text-align: center; font-size: 30px;\"\n        >\n        Sem dados para exibir neste período...\n      </div>\n\n      <div>\n        <div v-if=\"store.relLoja?.length > 0\" style=\"color: blue; font-size: 20px; text-align: center\">\n            {{ store.relLoja[store.indexVendas]?.identificacaointegracao }}\n            -  {{ store.relLoja[store.indexVendas]?.vendabruta }}\n\n   \n        </div>\n        <div v-if=\"!store.editando\">\n            <div  > \n                <div class=\"panel br-0 p-0 mt-0\" style=\"width: 400px;\n                                                        justify-content: space-between; \n                                                        \">\n                    <div class=\"custom-table\">\n                        <v-client-table :data=\"dadosRel\" :columns=\"columns1\" :options=\"table_option1\"> \n                        </v-client-table>\n                    </div>\n                </div>\n            </div>\n        </div>\n      </div>\n           \n    \n            \n        </div>\n    </div>    \n    </template>\n     \n    <script setup>\n        import '@/assets/sass/widgets/widgets.scss';\n        import { onMounted, ref, computed } from 'vue'; \n        import { useStore } from 'vuex';\n        import { indexStore, useUserStore } from '../../store/indexStore' \n        import ApexChart from 'vue3-apexcharts';    \n        import { useMeta } from '@/composables/use-meta';\n        import axios from 'axios';\n        import { useRouter } from \"vue-router\"; \n        import Progress from '@/components/Progress.vue';\n        \n        useMeta({ title: 'Relatorios' });\n        const storeLogin = useUserStore()  \n        const router = useRouter() \n        const store = indexStore(); \n        login()\n          \n        store.carregando = false \n        store.dadosRel = []\n    \n    \n        function login (){\n    \n            switch (storeLogin.empresas?.sucess) {\n            case true:\n                console.log('usuario logado')  \n                break;\n            case 'true':\n                console.log('usuario logado')  \n                 break; \n            default:\n                console.log('precisa fazer login')\n                router.push('/auth/login') \n            }\n             \n      }\n    \n      function logout(){ \n        storeLogin.empresas.sucess =false\n        console.log( storeLogin.empresas.sucess ) \n        router.push('/auth/login') \n      }\n    \n       \n\n  onMounted(() => {\n    store.indexVendas = 0 \n    async function getTypeRel (DataBaseCliente,ComboEmpresas,DataInicial,DataFinal,TypeRel) {\n                let data = JSON.stringify({\n                \"databasecliente\": DataBaseCliente,\n                \"comboempresas\": ComboEmpresas,\n                \"datainicial\": DataInicial,\n                \"datafinal\": DataFinal,\n                \"typerel\": TypeRel\n                });\n    \n                console.log('TypeRel: '+TypeRel +' DataInicial: '+DataInicial+' DataInicial: '+DataFinal)\n    \n                let config = {\n                method: 'post',\n                maxBodyLength: Infinity,\n                url:  store.ulrprincipal+'/evento/report',\n                headers: { \n                    'Content-Type': 'application/json', \n                    'Authorization': 'Basic dGVzdHNlcnZlcjp0ZXN0c2VydmVy'\n                },\n                data : data\n                };\n    \n                await axios.request(config)\n                .then((response) => {   \n                    if(TypeRel == 8){ \n                        store.relLoja = response.data.dados \n\n                        store.dadosRel =   [    \n                            { TIPO: 'Total Vendas Bruta',       DADOS: store.relLoja[store.indexVendas]?.vendabruta },\n                            { TIPO: 'Descontos',                DADOS: store.relLoja[store.indexVendas]?.descontos },\n                            { TIPO: 'Comissões (CS)',           DADOS: store.relLoja[store.indexVendas]?.comissoes },\n                            { TIPO: 'Total Vendas Liquida',     DADOS: store.relLoja[store.indexVendas]?.vendaliquida },\n                            { TIPO: 'CRM (Custo Merc Vendida)', DADOS: store.relLoja[store.indexVendas]?.customercadoriavendida },\n                            { TIPO: 'Taxas Cartão / Pgto',      DADOS: store.relLoja[store.indexVendas]?.taxacartao },\n                            { TIPO: 'Lucro Bruto Vendas',       DADOS: store.relLoja[store.indexVendas]?.lucrobrutosobrevenda },\n                            { TIPO: 'Despesas do Periodo (DP)', DADOS: store.relLoja[store.indexVendas]?.despesaperiodo },\n                        ]\n\n                        console.log(store.dadosRel)\n                    }                \n                    if(store.detectar_mobile()){\n                        window.scrollTo(0, 300);\n                        console.log('window.scrollTo')\n                    }\n                    store.Progress = false\n                    return response  \n                \n                })\n                .catch((error) => {\n                console.log(error);\n                store.Progress = false\n                });  \n        } \n\n\n        store.filtro= { \n            empresa: 'CENTRAL',\n            dataInicial:  dataFormatada('2023-09-01'),\n            dataFinal:    dataFormatada(new Date())\n        }\n    \n        function filtros(){\n            if(storeLogin.empresas?.sucess){\n                store.relLoja = []\n                store.relVendedores = []\n                store.relAnual = []\n                store.relContas = []\n                store.Progress = true        \n            getTypeRel(storeLogin.empresas.databasecliente,store.filtro.empresa,store.filtro.dataInicial,store.filtro.dataFinal,8)\n            } \n        }\n\n        filtros()\n        \n  \n  })\n      \n \n     \n    \n        function dataFormatada(d){ \n        var data =  new Date(d),\n            dia  = data.getDate().toString(),\n            diaF = (dia.length == 1) ? '0'+dia : dia,\n            mes  = (data.getMonth()+1).toString(), //+1 pois no getMonth Janeiro começa com zero.\n            mesF = (mes.length == 1) ? '0'+mes : mes,\n            anoF = data.getFullYear();\n        return anoF+\"-\"+mesF+\"-\"+diaF;\n        }\n      \n    \n    \n        \n        function somaValor(array) { \n            if(array) {\n                var arr =  array     \n            var sum = 0; \n            for(var i =0;i<arr.length;i++){ \n              sum+=arr[i]; \n            }   \n            }\n       \n            return (sum)\n          }\n    \n          function formataDinheiro(item) {\n             let venda = item;\n             if (!!venda && venda.toString().includes(\",\")) {\n               venda = venda.toString().replace(\",\", \".\");\n             }\n             return parseFloat(venda)\n               .toFixed(2)\n               .replace(\".\", \",\")\n               .replace(/(\\d)(?=(\\d{3})+\\,)/g, \"$1.\");\n        }\n    \n     \n    \n\n\n      \n \n\n   \n      \n    \n //table 2\n const columns1 = ref( ['TIPO','DADOS']);\n    const items1 = store.dadosRel;\n    const table_option1 = ref({\n        perPage: 10,\n        perPageValues: [5, 10, 20, 50],\n        skin: 'table ',\n        columnsClasses: { actions: 'actions text-center' },\n        sortable: [],\n        pagination: { nav: 'scroll', chunk: 5 },\n        texts: {\n            count: 'Showing {from} to {to} of {count}',\n            filter: '',\n            filterPlaceholder: 'Search...',\n            limit: 'Results:',\n        },\n        sortable: ['TIPO','DADOS' ],\n        sortIcon: {\n            base: 'sort-icon-none',\n            up: 'sort-icon-asc',\n            down: 'sort-icon-desc',\n        },\n        resizableColumns: false,\n    });\n\n    \n        \n    \n    \n    </script>\n    \n    <style>    \n    .filtrosWeb { \n     min-height: 43px;        \n    }\n    .filtrosMobile { \n     margin-top: -30px;    \n     min-height:  43px;    \n    }\n    .filtrosWebButton { \n     min-height: 43px;   \n     margin-top: 23px;       \n    }\n    .filtrosMobileButton { \n     margin-top: -20px;    \n     min-height:  43px;    \n    }\n    </style>\n    \n    "]},"metadata":{},"sourceType":"module"}
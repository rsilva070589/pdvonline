{"ast":null,"code":"import { ref } from 'vue';\nimport '@/assets/sass/authentication/auth-boxed.scss';\nimport { indexStore, useUserStore } from '../../store/indexStore';\nimport { useRouter } from \"vue-router\";\nimport { useMeta } from '@/composables/use-meta';\nimport axios from 'axios';\nexport default {\n  __name: 'login',\n\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n\n    useMeta({\n      title: 'Login'\n    });\n    const store = indexStore();\n    const storeLogin = useUserStore();\n    const router = useRouter();\n    const pwd_type = ref('password');\n\n    const set_pwd_type = () => {\n      if (pwd_type.value === 'password') {\n        pwd_type.value = 'text';\n      } else {\n        pwd_type.value = 'password';\n      }\n    };\n\n    const getLogin = () => {\n      let data = JSON.stringify({\n        \"USUARIO\": storeLogin.usuario,\n        \"SENHA\": storeLogin.senha,\n        \"SCHEMA\": storeLogin.schema\n      });\n      let config = {\n        method: 'post',\n        maxBodyLength: Infinity,\n        url: store.baseApiHTTPS + '/acesso',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Basic dGVzdHNlcnZlcjp0ZXN0c2VydmVy'\n        },\n        data: data\n      };\n      axios.request(config).then(response => {\n        if (response.data[0]) {\n          console.log(JSON.stringify(response.data[0]));\n          storeLogin.empresas = response.data[0]; // storeLogin.empresas.dadosempresa.push(response.data)\n\n          router.push('/');\n        } else {\n          store.alertLogin = true;\n        }\n      }).catch(error => {\n        store.alertLogin = true;\n        console.log(error);\n      });\n    };\n\n    const __returned__ = {\n      store,\n      storeLogin,\n      router,\n      pwd_type,\n      set_pwd_type,\n      getLogin,\n      ref,\n\n      get indexStore() {\n        return indexStore;\n      },\n\n      get useUserStore() {\n        return useUserStore;\n      },\n\n      get useRouter() {\n        return useRouter;\n      },\n\n      get useMeta() {\n        return useMeta;\n      },\n\n      get axios() {\n        return axios;\n      }\n\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"AAuIQ,SAASA,GAAT,QAAoB,KAApB;AACA,OAAO,8CAAP;AACA,SAASC,UAAT,EAAqBC,YAArB,QAAyC,wBAAzC;AACA,SAASC,SAAT,QAA0B,YAA1B;AACA,SAASC,OAAT,QAAwB,wBAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;;;;;;;IAGAD,OAAO,CAAC;MAAEE,KAAK,EAAE;IAAT,CAAD,CAAP;IACA,MAAMC,KAAK,GAAGN,UAAU,EAAxB;IACA,MAAMO,UAAU,GAAGN,YAAY,EAA/B;IAGJ,MAAMO,MAAM,GAAGN,SAAS,EAAxB;IACI,MAAMO,QAAQ,GAAGV,GAAG,CAAC,UAAD,CAApB;;IAEA,MAAMW,YAAY,GAAG,MAAM;MACvB,IAAID,QAAQ,CAACE,KAAT,KAAmB,UAAvB,EAAmC;QAC/BF,QAAQ,CAACE,KAAT,GAAiB,MAAjB;MACH,CAFD,MAEO;QACHF,QAAQ,CAACE,KAAT,GAAiB,UAAjB;MACH;IACJ,CAND;;IAQA,MAAMC,QAAQ,GAAG,MAAK;MAEd,IAAIC,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAe;QAC1B,WAAWR,UAAU,CAACS,OADI;QAE1B,SAAST,UAAU,CAACU,KAFM;QAG1B,UAAUV,UAAU,CAACW;MAHK,CAAf,CAAX;MAMA,IAAIC,MAAM,GAAG;QACbC,MAAM,EAAE,MADK;QAEbC,aAAa,EAAEC,QAFF;QAGbC,GAAG,EAAEjB,KAAK,CAACkB,YAAN,GAAmB,SAHX;QAIbC,OAAO,EAAE;UACL,gBAAgB,kBADX;UAEL,iBAAiB;QAFZ,CAJI;QAQbZ,IAAI,EAAGA;MARM,CAAb;MAWAT,KAAK,CAACsB,OAAN,CAAcP,MAAd,EACCQ,IADD,CACOC,QAAD,IAAc;QAEnB,IAAIA,QAAQ,CAACf,IAAT,CAAc,CAAd,CAAJ,EAAqB;UAClBgB,OAAO,CAACC,GAAR,CAAYhB,IAAI,CAACC,SAAL,CAAea,QAAQ,CAACf,IAAT,CAAc,CAAd,CAAf,CAAZ;UACAN,UAAU,CAACwB,QAAX,GAAsBH,QAAQ,CAACf,IAAT,CAAc,CAAd,CAAtB,CAFkB,CAGtB;;UACIL,MAAM,CAACwB,IAAP,CAAY,GAAZ;QACF,CALD,MAKK;UACF1B,KAAK,CAAC2B,UAAN,GAAiB,IAAjB;QACF;MAGD,CAbD,EAcCC,KAdD,CAcQC,KAAD,IAAW;QACd7B,KAAK,CAAC2B,UAAN,GAAiB,IAAjB;QACJJ,OAAO,CAACC,GAAR,CAAYK,KAAZ;MACC,CAjBD;IAoBP,CAvCD","names":["ref","indexStore","useUserStore","useRouter","useMeta","axios","title","store","storeLogin","router","pwd_type","set_pwd_type","value","getLogin","data","JSON","stringify","usuario","senha","schema","config","method","maxBodyLength","Infinity","url","baseApiHTTPS","headers","request","then","response","console","log","empresas","push","alertLogin","catch","error"],"sources":["/home/renato/projetos/pdvsmart/src/views/auth/login.vue"],"sourcesContent":["<template>\n \n \n  <div v-if=\"store.alertLogin\" @click=\"store.alertLogin=false\"\n    style=\"z-index: 1080\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\">\n    <div class=\"toast-body toast-danger   justify-content-between\"\n    style=\"text-align: center;\"> \n       Usu√°rio ou Senha Incorretos!  \n    </div>\n  </div>\n \n    \n        <div class=\"form auth-boxed\" @click=\"store.alertLogin=false\">\n            <div class=\"form-container outer\">\n                <div class=\"form-form\">\n                    <div class=\"form-form-wrap\">\n                        <div class=\"form-container\">\n                            <div class=\"form-content\">\n                                <h1 class=\"\">Login</h1>\n                                <p class=\"\">Entre com seu usuario e senha</p>\n    \n                                <form class=\"text-start\">\n                                   \n                                    <div class=\"form\">\n                                        <div id=\"username-field\" class=\"field-wrapper input\">\n                                            <label for=\"username\">Usuario</label>\n                                            <svg\n                                                xmlns=\"http://www.w3.org/2000/svg\"\n                                                width=\"24\"\n                                                height=\"24\"\n                                                viewBox=\"0 0 24 24\"\n                                                fill=\"none\"\n                                                stroke=\"currentColor\"\n                                                stroke-width=\"2\"\n                                                stroke-linecap=\"round\"\n                                                stroke-linejoin=\"round\"\n                                                class=\"feather feather-user\"\n                                            >\n                                                <path d=\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\"></path>\n                                                <circle cx=\"12\" cy=\"7\" r=\"4\"></circle>\n                                            </svg>\n                                            <input type=\"text\" \n                                                    class=\"form-control\" \n                                                    placeholder=\"usuario\" \n                                                    v-model=\"storeLogin.usuario\" />\n                                        </div>\n    \n                                        <div id=\"password-field\" class=\"field-wrapper input mb-2\">\n                                            <div class=\"d-flex justify-content-between\">\n                                                <label for=\"password\">SENHA</label>\n                                                <router-link to=\"\" class=\"forgot-pass-link\">Esqueceu a senha?</router-link>\n                                            </div>\n                                            <svg\n                                                xmlns=\"http://www.w3.org/2000/svg\"\n                                                width=\"24\"\n                                                height=\"24\"\n                                                viewBox=\"0 0 24 24\"\n                                                fill=\"none\"\n                                                stroke=\"currentColor\"\n                                                stroke-width=\"2\"\n                                                stroke-linecap=\"round\"\n                                                stroke-linejoin=\"round\"\n                                                class=\"feather feather-lock\"\n                                            >\n                                                <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect>\n                                                <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"></path>\n                                            </svg>\n                                            <input :type=\"pwd_type\" \n                                                    class=\"form-control\" \n                                                    placeholder=\"Password\"\n                                                    v-model=\"storeLogin.senha\" />\n                                            <svg\n                                                @click=\"set_pwd_type\"\n                                                xmlns=\"http://www.w3.org/2000/svg\"\n                                                width=\"24\"\n                                                height=\"24\"\n                                                viewBox=\"0 0 24 24\"\n                                                fill=\"none\"\n                                                stroke=\"currentColor\"\n                                                stroke-width=\"2\"\n                                                stroke-linecap=\"round\"\n                                                stroke-linejoin=\"round\"\n                                                id=\"toggle-password\"\n                                                class=\"feather feather-eye\"\n                                            >\n                                                <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\n                                                <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\n                                            </svg>\n                                        </div>\n                                    \n                                        <div id=\"username-field\" class=\"field-wrapper input\">\n                                            <label for=\"schema\">Empresa</label>\n                                            <svg\n                                                xmlns=\"http://www.w3.org/2000/svg\"\n                                                width=\"24\"\n                                                height=\"24\"\n                                                viewBox=\"0 0 24 24\"\n                                                fill=\"none\"\n                                                stroke=\"currentColor\"\n                                                stroke-width=\"2\"\n                                                stroke-linecap=\"round\"\n                                                stroke-linejoin=\"round\"\n                                                class=\"feather feather-user\"\n                                            >\n                                                <path d=\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\"></path>\n                                                <circle cx=\"12\" cy=\"7\" r=\"4\"></circle>\n                                            </svg>\n                                            <input type=\"text\" \n                                                    class=\"form-control\" \n                                                    placeholder=\"schema\" \n                                                    v-model=\"storeLogin.schema\" />\n                                        </div>\n                                      \n                                      \n                                      \n                                    </div> \n                                </form> \n                           \n                                    <div class=\"form \" style=\"justify-content: space-between;\">\n                                            <div class=\"field-wrapper \">\n                                                <div @click=\"getLogin()\"  class=\"btn btn-primary mb-4 form-control active w-300\">Log In</div>\n                                                \n                                            </div> \n                                        </div>\n    \n                               \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n</template>\n    \n<script setup>\n        import { ref } from 'vue';\n        import '@/assets/sass/authentication/auth-boxed.scss';\n        import { indexStore, useUserStore } from '../../store/indexStore' \n        import { useRouter } from \"vue-router\"; \n        import { useMeta } from '@/composables/use-meta';\n        import axios from 'axios';\n        \n      \n        useMeta({ title: 'Login' });\n        const store = indexStore();  \n        const storeLogin = useUserStore();  \n        \n     \n    const router = useRouter()\n        const pwd_type = ref('password');\n    \n        const set_pwd_type = () => {\n            if (pwd_type.value === 'password') {\n                pwd_type.value = 'text';\n            } else {\n                pwd_type.value = 'password';\n            }\n        };\n    \n        const getLogin = ()=> {\n           \n                let data = JSON.stringify({\n                \"USUARIO\": storeLogin.usuario,\n                \"SENHA\": storeLogin.senha,\n                \"SCHEMA\": storeLogin.schema\n                });\n    \n                let config = {\n                method: 'post',\n                maxBodyLength: Infinity,\n                url: store.baseApiHTTPS+'/acesso',\n                headers: { \n                    'Content-Type': 'application/json', \n                    'Authorization': 'Basic dGVzdHNlcnZlcjp0ZXN0c2VydmVy'\n                },\n                data : data\n                };\n    \n                axios.request(config)\n                .then((response) => {\n\n                 if (response.data[0]){\n                    console.log(JSON.stringify(response.data[0]));  \n                    storeLogin.empresas = response.data[0]                \n                // storeLogin.empresas.dadosempresa.push(response.data)\n                    router.push('/') \n                 }else{\n                    store.alertLogin=true\n                 }   \n\n             \n                })\n                .catch((error) => {\n                    store.alertLogin=true\n                console.log(error);\n                });\n                \n    \n        }\n    </script>\n"]},"metadata":{},"sourceType":"module"}
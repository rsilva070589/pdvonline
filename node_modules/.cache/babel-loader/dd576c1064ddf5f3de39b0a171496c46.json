{"ast":null,"code":"import { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createVNode as _createVNode, createTextVNode as _createTextVNode, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  key: 0\n};\nconst _hoisted_2 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [!$setup.storeLogin.empresas.login ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, \" usuario nao logado \")) : _createCommentVNode(\"v-if\", true), _createTextVNode(\" \" + _toDisplayString($setup.storeLogin.empresas?.login) + \" \", 1\n  /* TEXT */\n  ), $setup.storeLogin.empresas.login ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createVNode($setup[\"PDV\"])])) : _createCommentVNode(\"v-if\", true)], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":";;;;;;;;8DAEYA,kBAAWC,QAAX,CAAoBC,uBAAhCC,oBAEO,KAFP,EAEOC,UAFP,EAAuC,sBAAvC,yDAEO,MACHC,iBAAGL,kBAAWC,QAAX,EAAqBC,KAAxB,CADG,GAC6B,KAEnC;EAAA;KAAWF,kBAAWC,QAAX,CAAoBC,uBAA/BC,oBAEM,KAFN,EAEMG,UAFN,EAEM,CADHC,aAAWP,aAAX,CACG,CAFN","names":["$setup","empresas","login","_createElementBlock","_hoisted_1","_toDisplayString","_hoisted_2","_createVNode"],"sourceRoot":"","sources":["/home/renato/projetos/pdvsmart/src/views/index.vue"],"sourcesContent":["<template> \n\n<div v-if=\"!storeLogin.empresas.login\">\n    usuario nao logado\n </div>\n    {{ storeLogin.empresas?.login }}\n \n <div v-if=\"storeLogin.empresas.login\">\n    <PDV></PDV>\n </div>\n    \n    \n  \n</template>\n \n<script setup>\n    import '@/assets/sass/widgets/widgets.scss';\n    import { computed, ref } from 'vue';\n    import { useStore } from 'vuex';\n    import { indexStore, useUserStore } from './../store/indexStore' \n    import ApexChart from 'vue3-apexcharts';    \n    import { useMeta } from '@/composables/use-meta';\n    import axios from 'axios';\n    import { useRouter } from \"vue-router\"; \n    import Progress from '@/components/Progress.vue';\n    import Filtros from './relatorios/Filtros.vue'\n    import PDV from './pdv/Pdv.vue'\n    \n    useMeta({ title: 'Dashboard' });\n    const storeLogin = useUserStore()  \n    const router = useRouter() \n    const store = indexStore(); \n    login()\n\n    \n      \n    store.carregando = false \n    store.esconderFiltroEmpresa = false\n\n\n    function login (){ \n          switch (storeLogin.empresas?.login) {\n          case true:\n              console.log('usuario logado') \n              if(!window.location.hash) {\n                    window.location = window.location + '#carregar';\n                    window.location.reload();\n                }\n \n              break; \n          default:\n              console.log('precisa fazer login')    \n              if(!window.location.hash) {\n                    window.location = window.location + '#carregar';\n                    window.location.reload();\n                }\n \n              router.push('/auth/login')           \n          } \n    }\n\n\n    \n  \n\n  function logout(){ \n    storeLogin.empresas.sucess =false\n    console.log( storeLogin.empresas.sucess ) \n    router.push('/auth/login') \n  }\n\n   \n\n    store.filtro= { \n        empresa: 'CENTRAL',\n        dataInicial:  dataFormatada(new Date()),\n        dataFinal:    dataFormatada(new Date())\n    }\n\n    function filtros(){\n        store.dataErrada = false\n        if(storeLogin.empresas?.sucess && store.filtro.dataFinal >= store.filtro.dataInicial){\n            store.relLoja = []\n            store.relVendedores = []\n            store.relAnual = []\n            store.relContas = []\n            store.Progress = true\n        getTypeRel(storeLogin.empresas.databasecliente,store.filtro.empresa,store.filtro.dataInicial,store.filtro.dataFinal,1)\n        getTypeRel(storeLogin.empresas.databasecliente,store.filtro.empresa,store.filtro.dataInicial,store.filtro.dataFinal,2)\n        getTypeRel(storeLogin.empresas.databasecliente,store.filtro.empresa,store.filtro.dataInicial,store.filtro.dataFinal,3)\n        getTypeRel(storeLogin.empresas.databasecliente,store.filtro.empresa,store.filtro.dataInicial,store.filtro.dataFinal,4)\n        if(store.detectar_mobile()){\n                    window.scrollTo(0, 310);\n                    console.log('window.scrollTo')\n                }\n        } else{\n            store.dataErrada = true\n        }\n    }\n\n    filtros()\n    \n    async function getTypeRel (DataBaseCliente,ComboEmpresas,DataInicial,DataFinal,TypeRel) {\n            let data = JSON.stringify({\n            \"databasecliente\": DataBaseCliente,\n            \"comboempresas\": ComboEmpresas,\n            \"datainicial\": DataInicial,\n            \"datafinal\": DataFinal,\n            \"typerel\": TypeRel\n            });\n\n            console.log('TypeRel: '+TypeRel +' DataInicial: '+DataInicial+' DataInicial: '+DataFinal)\n\n            let config = {\n            method: 'post',\n            maxBodyLength: Infinity,\n            url:  store.ulrprincipal+'/evento/report',\n            headers: { \n                'Content-Type': 'application/json', \n                'Authorization': 'Basic dGVzdHNlcnZlcjp0ZXN0c2VydmVy'\n            },\n            data : data\n            };\n\n            await axios.request(config)\n            .then((response) => {   \n                if(TypeRel == 1){ \n                    store.relLoja = response.data.dados \n                }\n                if(TypeRel == 2){\n                    \n                    store.relVendedores = response.data.dados\n                }\n                if(TypeRel == 3){ \n                    store.relAnual = response.data.dados \n                } \n                if(TypeRel == 4){ \n                    store.relContas = response.data.dados \n                } \n               \n                store.Progress = false\n                return response  \n            \n            })\n            .catch((error) => {\n            console.log(error);\n            store.Progress = false\n            });\n\n         \n    } \n \n\n    function dataFormatada(d){ \n    var data =  new Date(d),\n        dia  = data.getDate().toString(),\n        diaF = (dia.length == 1) ? '0'+dia : dia,\n        mes  = (data.getMonth()+1).toString(), //+1 pois no getMonth Janeiro começa com zero.\n        mesF = (mes.length == 1) ? '0'+mes : mes,\n        anoF = data.getFullYear();\n    return anoF+\"-\"+mesF+\"-\"+diaF;\n    }\n  \n\n\n    \n    function somaValor(array) { \n        if(array) {\n            var arr =  array     \n        var sum = 0; \n        for(var i =0;i<arr.length;i++){ \n          sum+=arr[i]; \n        }   \n        }\n   \n        return (sum)\n      }\n\n      function formataDinheiro(item) {\n         let venda = item;\n         if (!!venda && venda.toString().includes(\",\")) {\n           venda = venda.toString().replace(\",\", \".\");\n         }\n         return parseFloat(venda)\n           .toFixed(2)\n           .replace(\".\", \",\")\n           .replace(/(\\d)(?=(\\d{3})+\\,)/g, \"$1.\");\n    }\n\n \n  \n    //Simple Bar\n   \n       //Simple Bar\n       const options_5 = computed(() => {\n        return {\n            chart:      { toolbar: { show: false }, zoom: { enabled: false }, }, \n            dataLabels: { enabled: false }, stroke: { curve: 'straight' },\n            title:      { align: 'left', style: { fontWeight: 'normal' } },\n            grid:       { row: { colors: ['#f1f2f3', 'transparent'], opacity: 0.5 } },\n            xaxis:      { categories: store.relVendedores.map(x => x.loginfuncionario)  },\n        };\n    });\n      //Simple Bar\n    \n\n    //unique visitors\n   \n    const unique_visitor_options = computed(() => {\n        \n        return {\n            chart: { height: 350,      type: 'bar'},\n            dataLabels: { enabled: !store.detectar_mobile(), formatter: function (val) {return \"R$ \" +formataDinheiro(val) },\n              offsetY: -20,\n              style: {\n                fontSize: '11px',\n                colors: [\"#888EA8\"]\n              }              \n            },\n             \n            colors: ['#5c1ac3'],\n            \n           \n\n            plotOptions: {\n              bar: {\n                columnWidth: '90%',\n                borderRadius: 0,\n                dataLabels: {\n                  position: 'top', // top, center, bottom\n                },\n              }\n            },\n            legend: { position: 'bottom', horizontalAlign: 'center', fontSize: '14px', markers: { width: 12, height: 12 }, itemMargin: { horizontal: 7, vertical: 8 } },\n            grid: { borderColor:  '#e0e6ed' },\n            xaxis: {\n                categories: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],\n                axisBorder: { show: true, color:   '#e0e6ed' },\n                \n            },\n            yaxis: {\n                tickAmount: 6,\n            },\n            fill: {\n                type: 'gradient',\n                gradient: { shade:  'light', type: 'vertical', shadeIntensity: 0.3, inverseColors: false, opacityFrom: 1, opacityTo: 0.8, stops: [0, 100] },\n            },\n            tooltip: {\n                theme:  'light',\n                y: {\n                    formatter: function (val) {\n                        return val;\n                    },\n                },\n            },\n        };\n    });\n\n\n// vendas por empresa\n \n \nconst chartOptions = computed(() => {\n\n    return {\n        chart: {\n              height: 350,\n              type: 'bar',\n              events: {\n                click: function(chart, w, e) {\n                  // console.log(chart, w, e)\n                }\n              }\n            },\n            colors: ['#5c1ac3', '#ffbb44','#A52A2A','#5F9EA0','#8B008B','#483D8B','#2F4F4F','#DCDCDC'],\n            plotOptions: {\n              bar: {\n                columnWidth: '80%',\n                distributed: true,\n              }\n            },\n            \n            dataLabels: { enabled: !store.detectar_mobile(), formatter: function (val) {return \"R$ \" +formataDinheiro(val) },\n            offsetY: -20,\n            style: {fontSize: '11px',colors: [\"#888EA8\"]\n              } },\n            legend: {\n              show: false\n            }, \n            plotOptions: { \n              bar: {\n                columnWidth: '80%',\n                distributed: true,\n                borderRadius: 0,\n                dataLabels: {\n                  position: 'top', // top, center, bottom\n                },\n              }\n              \n            },\n            \n            xaxis:      { categories: store.relLoja.map(x => x.identificacaointegracao) }\n    }\n             \n          })\n\n //Statistics\n const total_visit_series = ref([{ data: [21, 9, 36, 12, 44, 25, 59, 41, 66, 25] }]);\n    const total_visit_options = computed(() => {\n     \n        return {\n            chart: { sparkline: { enabled: true }, dropShadow: { enabled: true, top: 3, left: 1, blur: 3, color: '#009688', opacity: 0.7 } },\n            stroke: { curve: 'smooth', width: 2 },\n            markers: { size: 0 },\n            colors: ['#009688'],\n            grid: { padding: { top: 0, bottom: 0, left: 0 } },\n            tooltip: {\n                theme:   'light',\n                x: { show: false },\n                y: {\n                    title: {\n                        formatter: function formatter() {\n                            return '';\n                        },\n                    },\n                },\n            },\n            responsive: [{ breakPoint: 576, options: { chart: { height: 95 }, grid: { padding: { top: 45, bottom: 0, left: 0 } } } }],\n        };\n    });   \n    \n    const paid_visit_series = ref([{ data: [22, 19, 30, 47, 32, 44, 34, 55, 41, 69] }]);\n    const paid_visit_options = computed(() => {\n         \n        return {\n            chart: { sparkline: { enabled: true }, dropShadow: { enabled: true, top: 1, left: 1, blur: 2, color: '#e2a03f', opacity: 0.7 } },\n            stroke: { curve: 'smooth', width: 2 },\n            markers: { size: 0 },\n            colors: ['#e2a03f'],\n            grid: { padding: { top: 0, bottom: 0, left: 0 } },\n            tooltip: {\n                theme:  'light',\n                x: { show: false },\n                y: {\n                    title: {\n                        formatter: function formatter() {\n                            return '';\n                        },\n                    },\n                },\n            },\n            responsive: [{ breakPoint: 576, options: { chart: { height: 95 }, grid: { padding: { top: 35, bottom: 0, left: 0 } } } }],\n        };\n    });\n\n\n  \n\nconst options_7 = computed(() => {\n     \n     return {\n        chart: { toolbar: { show: false } },\n        colors: ['#2a37ff','#ffa500','#ff2717'],\n        labels: ['Pagas','A Vencer', 'Vencidas'],\n        responsive: [{ breakpoint: 480, options: { chart: { width: 200 }, legend: { position: 'bottom' } } }]\n     };\n });   \n\n    \n\n\n</script>\n\n<style>    \n \n.filtrosWebButton { \n min-height: 43px;   \n margin-top: 23px; \n}\n.filtrosMobileButton { \n margin-top: -20px;    \n min-height:  43px;    \n}\n \n</style>\n\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport { indexStore } from '../../store/IndexStore';\nimport { onMounted, ref } from 'vue';\nimport axios from 'axios';\nimport { useMeta } from '@/composables/use-meta';\nexport default {\n  __name: 'ItensDetalhe',\n\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n\n    useMeta({\n      title: 'Multiple Tables'\n    });\n    const store = indexStore();\n    const code_arr = ref([]); //table 1\n    //table 2\n\n    const columns1 = ref(['MES', 'COD_PRODUTO', 'NOME', 'QTDE', 'VALOR', 'CUSTO', 'LUCRO']);\n    const items1 = store.itensHistorico;\n    const table_option1 = ref({\n      perPage: 10,\n      perPageValues: [5, 10, 20, 50],\n      skin: 'table ',\n      columnsClasses: {\n        actions: 'actions text-center'\n      },\n      sortable: [],\n      pagination: {\n        nav: 'scroll',\n        chunk: 5\n      },\n      texts: {\n        count: 'Showing {from} to {to} of {count}',\n        filter: '',\n        filterPlaceholder: 'Search...',\n        limit: 'Results:'\n      },\n      sortable: ['MES', 'COD_PRODUTO', 'NOME', 'QTDE', 'VALOR', 'CUSTO', 'LUCRO'],\n      sortIcon: {\n        base: 'sort-icon-none',\n        up: 'sort-icon-asc',\n        down: 'sort-icon-desc'\n      },\n      resizableColumns: false\n    });\n    onMounted(() => {\n      bind_data();\n    });\n\n    const bind_data = async () => {\n      store.itensHistorico = [];\n      var result = await axios.get(store.baseApiHTTPS + '/mercadohistorico/' + store.ItensSelecionadoDemanda.CODIGO_BARRAS); //table 2\n\n      console.log(result.data);\n      store.itensHistorico = result.data;\n    };\n\n    function totalEstoque() {\n      if (store.itensCadastro) {\n        var somarProduto = store.itensCadastro.map(p => {\n          return p.VALOR_CUSTO * p.QTDE_ESTOQUE;\n        });\n        let totalProd = 0;\n\n        for (let i in somarProduto) {\n          totalProd += somarProduto[i];\n        }\n\n        return formataDinheiro(totalProd, 2);\n      }\n    }\n\n    function formataDinheiro(item) {\n      let venda = item;\n\n      if (!!venda && venda.toString().includes(\",\")) {\n        venda = venda.toString().replace(\",\", \".\");\n      }\n\n      return parseFloat(venda).toFixed(2).replace(\".\", \",\").replace(/(\\d)(?=(\\d{3})+\\,)/g, \"$1.\");\n    }\n\n    const __returned__ = {\n      store,\n      code_arr,\n      columns1,\n      items1,\n      table_option1,\n      bind_data,\n      totalEstoque,\n      formataDinheiro,\n\n      get indexStore() {\n        return indexStore;\n      },\n\n      onMounted,\n      ref,\n\n      get axios() {\n        return axios;\n      },\n\n      get useMeta() {\n        return useMeta;\n      }\n\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"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","names":["indexStore","onMounted","ref","axios","useMeta","title","store","code_arr","columns1","items1","itensHistorico","table_option1","perPage","perPageValues","skin","columnsClasses","actions","sortable","pagination","nav","chunk","texts","count","filter","filterPlaceholder","limit","sortIcon","base","up","down","resizableColumns","bind_data","result","get","baseApiHTTPS","ItensSelecionadoDemanda","CODIGO_BARRAS","console","log","data","totalEstoque","itensCadastro","somarProduto","map","p","VALOR_CUSTO","QTDE_ESTOQUE","totalProd","i","formataDinheiro","item","venda","toString","includes","replace","parseFloat","toFixed"],"sources":["/home/renato/projetos/pdvsmart/src/views/itens/ItensDetalhe.vue"],"sourcesContent":["<template>\n    <div class=\"layout-px-spacing\" style=\"margin-top: -100px;\">\n    <h4>Historico de Vendas do Item</h4>\n      \n  <div style=\"padding: 10px;\">\n    <h3 style=\"color: red;\">{{ store.ItensSelecionadoDemanda.NOME }} - {{  store.ItensSelecionadoDemanda.CODIGO_BARRAS }}</h3> \n  </div>\n\n  <div class=\"panel br-0 p-0 mt-0\">\n                    <div class=\"custom-table\">\n                        <v-client-table :data=\"store.itensHistorico\" :columns=\"columns1\" :options=\"table_option1\">\n                        \n                            <template #progress=\"props\">\n                                <div class=\"progress\">\n                                    <div\n                                        role=\"progressbar\"\n                                        aria-valuemin=\"0\"\n                                        :aria-valuemax=\"props.row.progress.count\"\n                                        aria-valuenow=\"100\"\n                                        class=\"progress-bar\"\n                                        :class=\"'bg-' + props.row.progress.class\"\n                                        :style=\"{ width: props.row.progress.count + '%' }\"\n                                    ></div>\n                                </div>\n                            </template>\n                            <template #salary=\"props\"> ${{ props.row.salary }} </template>\n                            <template #actions=\"props\">\n                                <div class=\"me-2 custom-dropdown dropdown btn-group\">\n                                    <a class=\"btn dropdown-toggle btn-icon-only\" href=\"#\" role=\"button\" id=\"pendingTask\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                                        <svg\n                                            xmlns=\"http://www.w3.org/2000/svg\"\n                                            style=\"width: 24px; height: 24px\"\n                                            width=\"24\"\n                                            height=\"24\"\n                                            viewBox=\"0 0 24 24\"\n                                            fill=\"none\"\n                                            stroke=\"currentColor\"\n                                            stroke-width=\"2\"\n                                            stroke-linecap=\"round\"\n                                            stroke-linejoin=\"round\"\n                                            class=\"feather feather-more-horizontal\"\n                                        >\n                                            <circle cx=\"12\" cy=\"12\" r=\"1\"></circle>\n                                            <circle cx=\"19\" cy=\"12\" r=\"1\"></circle>\n                                            <circle cx=\"5\" cy=\"12\" r=\"1\"></circle>\n                                        </svg>\n                                    </a>\n\n                                    <ul class=\"dropdown-menu dropdown-menu-end\">\n                                        <li>\n                                            <a href=\"javascript:void(0);\" class=\"dropdown-item\" @click=\"view_row1(props.row)\"> view </a>\n                                        </li>\n                                        <li @click=\"selectItemEdit(props.row)\">\n                                            <a href=\"javascript:void(0);\" class=\"dropdown-item\"> Edit </a>\n                                        </li>\n                                        <li @click=\"deleteItem(props.row)\">\n                                            <a href=\"javascript:void(0);\" class=\"dropdown-item\"> Delete </a>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </template>\n                        </v-client-table>\n                    </div>\n                </div>\n      \n      <div>\n      <button @click=\"store.itensDetalhe = false\" >Voltar</button>\n      </div>\n    </div>\n     \n</template>\n\n<script setup>\n    import {indexStore} from '../../store/IndexStore' \n    import { onMounted, ref } from 'vue';\n    import axios from 'axios'\n    import { useMeta } from '@/composables/use-meta';\n   \n    useMeta({ title: 'Multiple Tables' });\n    const store = indexStore(); \n    const code_arr = ref([]);\n    //table 1\n   \n    \n    //table 2\n    const columns1 = ref(['MES', 'COD_PRODUTO', 'NOME' ,'QTDE','VALOR','CUSTO','LUCRO']);\n    const items1 = store.itensHistorico;\n    const table_option1 = ref({\n        perPage: 10,\n        perPageValues: [5, 10, 20, 50],\n        skin: 'table ',\n        columnsClasses: { actions: 'actions text-center' },\n        sortable: [],\n        pagination: { nav: 'scroll', chunk: 5 },\n        texts: {\n            count: 'Showing {from} to {to} of {count}',\n            filter: '',\n            filterPlaceholder: 'Search...',\n            limit: 'Results:',\n        },\n        sortable: ['MES', 'COD_PRODUTO', 'NOME', 'QTDE', 'VALOR','CUSTO','LUCRO' ],\n        sortIcon: {\n            base: 'sort-icon-none',\n            up: 'sort-icon-asc',\n            down: 'sort-icon-desc',\n        },\n        resizableColumns: false,\n    });\n\n    onMounted(() => {\n    \n            bind_data();\n      \n    });\n\n \n \n \n    const bind_data = async  () => { \n        store.itensHistorico =  []\n            var result = await axios.get(store.baseApiHTTPS+'/mercadohistorico/'+store.ItensSelecionadoDemanda.CODIGO_BARRAS)  \n        //table 2\n        console.log(result.data)\n        store.itensHistorico =  result.data\n    \n\n    }\n \n\n \n \n \n\n \n\n  \n function totalEstoque() {\n    if (store.itensCadastro){\n        var somarProduto = store.itensCadastro.map(p =>{\n                return (p.VALOR_CUSTO * p.QTDE_ESTOQUE)\n              } )\n             \n\n  let totalProd = 0\n  for(let i in somarProduto) {\n           totalProd += somarProduto[i] \n    }\n    \n          return formataDinheiro(totalProd,2)\n    }\n\n}\n  \nfunction formataDinheiro(item) {\n         let venda = item;\n         if (!!venda && venda.toString().includes(\",\")) {\n           venda = venda.toString().replace(\",\", \".\");\n         }\n         return parseFloat(venda)\n           .toFixed(2)\n           .replace(\".\", \",\")\n           .replace(/(\\d)(?=(\\d{3})+\\,)/g, \"$1.\");\n    }\n\n</script>\n"]},"metadata":{},"sourceType":"module"}
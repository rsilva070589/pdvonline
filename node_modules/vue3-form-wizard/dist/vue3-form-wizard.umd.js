/*
 * vue3-form-wizard
 * Creator:parsa jiravand
 * vue3-form-wizard is a vue based component with no external depenendcies which simplifies tab wizard management.
 * v0.0.4
 * MIT License
 */

(function(o,t){typeof exports=="object"&&typeof module!="undefined"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(o=typeof globalThis!="undefined"?globalThis:o||self,t(o.Vue3FormWizard={},o.Vue))})(this,function(o,t){"use strict";var d=(e,i)=>{const a=e.__vccOpts||e;for(const[s,n]of i)a[s]=n;return a};const u={},S={class:"wizard-btn",tabindex:"-1",type:"button"};function p(e,i,a,s,n,r){return t.openBlock(),t.createElementBlock("button",S,[t.renderSlot(e.$slots,"default")])}var h=d(u,[["render",p]]);const x={name:"wizard-step",props:{tab:{type:Object,default:()=>{}},transition:{type:String,default:""},index:{type:Number,default:0}},computed:{iconActiveStyle(){return{backgroundColor:this.tab.color}},stepCheckedStyle(){return{borderColor:this.tab.color}},errorStyle(){return{borderColor:this.tab.errorColor,backgroundColor:this.tab.errorColor}},stepTitleStyle(){return{color:this.tab.validationError?this.tab.errorColor:this.tab.color}},isStepSquare(){return this.tab.shape==="square"},isTabShape(){return this.tab.shape==="tab"}}},C=["tabindex","id","aria-controls","aria-disabled","aria-selected"],k={key:1,class:"wizard-icon"},z={key:1,class:"wizard-icon"};function I(e,i,a,s,n,r){return t.openBlock(),t.createElementBlock("li",{class:t.normalizeClass({active:a.tab.active})},[t.createElementVNode("a",{href:"javascript:void(0)",class:t.normalizeClass({disabled:!a.tab.checked})},[t.createElementVNode("div",{class:t.normalizeClass(["wizard-icon-circle md",{checked:a.tab.checked,square_shape:r.isStepSquare,tab_shape:r.isTabShape}]),role:"tab",tabindex:a.tab.checked?0:"",id:`step-${a.tab.tabId}`,"aria-controls":a.tab.tabId,"aria-disabled":a.tab.active,"aria-selected":a.tab.active,style:t.normalizeStyle([a.tab.checked?r.stepCheckedStyle:{},a.tab.validationError?r.errorStyle:{}])},[a.tab.active?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(["wizard-icon-container",{square_shape:r.isStepSquare,tab_shape:r.isTabShape}]),style:t.normalizeStyle([a.tab.active?r.iconActiveStyle:{},a.tab.validationError?r.errorStyle:{}])},[t.renderSlot(e.$slots,"active-step",{},()=>[a.tab.icon?(t.openBlock(),t.createElementBlock("i",{key:0,class:t.normalizeClass([a.tab.icon,"wizard-icon"])},null,2)):(t.openBlock(),t.createElementBlock("i",k,t.toDisplayString(a.index+1),1))])],6)):t.createCommentVNode("",!0),a.tab.active?t.createCommentVNode("",!0):t.renderSlot(e.$slots,"default",{key:1},()=>[!a.tab.active&&a.tab.icon?(t.openBlock(),t.createElementBlock("i",{key:0,class:t.normalizeClass([a.tab.icon,"wizard-icon"])},null,2)):t.createCommentVNode("",!0),!a.tab.active&&!a.tab.icon?(t.openBlock(),t.createElementBlock("i",z,t.toDisplayString(a.index+1),1)):t.createCommentVNode("",!0)])],14,C),t.renderSlot(e.$slots,"title",{},()=>[t.createElementVNode("span",{class:t.normalizeClass(["stepTitle",{active:a.tab.active,has_error:a.tab.validationError}]),style:t.normalizeStyle(a.tab.active?r.stepTitleStyle:{})},t.toDisplayString(a.tab.title),7)])],2)],2)}var b=d(x,[["render",I]]);function B(){return document.activeElement.id}function T(e=[]){let i=B();return e.findIndex(s=>s.tabId===i)}function m(e){document.getElementById(e).focus()}function _(e){return e.then&&typeof e.then=="function"}var H="";const w={name:"form-wizard",components:{WizardButton:h,WizardStep:b},props:{id:{type:String,default:"fw_"+new Date().valueOf()},title:{type:String,default:"Awesome Wizard"},subtitle:{type:String,default:"Split a complicated flow in multiple steps"},nextButtonText:{type:String,default:"Next"},backButtonText:{type:String,default:"Back"},finishButtonText:{type:String,default:"Finish"},hideButtons:{type:Boolean,default:!1},validateOnBack:Boolean,color:{type:String,default:"#e74c3c"},errorColor:{type:String,default:"#8b0000"},shape:{type:String,default:"circle"},layout:{type:String,default:"horizontal"},stepsClasses:{type:[String,Array],default:""},stepSize:{type:String,default:"md",validator:e=>["xs","sm","md","lg"].indexOf(e)!==-1},transition:{type:String,default:""},startIndex:{type:Number,default:0,validator:e=>e>=0}},provide(){return{addTab:this.addTab,removeTab:this.removeTab}},data(){return{activeTabIndex:0,currentPercentage:0,maxStep:0,loading:!1,tabs:[]}},computed:{slotProps(){return{nextTab:this.nextTab,prevTab:this.prevTab,activeTabIndex:this.activeTabIndex,isLastStep:this.isLastStep,fillButtonStyle:this.fillButtonStyle}},tabCount(){return this.tabs.length},isLastStep(){return this.activeTabIndex===this.tabCount-1},isVertical(){return this.layout==="vertical"},displayPrevButton(){return this.activeTabIndex!==0},stepPercentage(){return 1/(this.tabCount*2)*100},progressBarStyle(){return{backgroundColor:this.color,width:`${this.progress}%`,color:this.color}},fillButtonStyle(){return{backgroundColor:this.color,borderColor:this.color,color:"white"}},progress(){let e=0;if(this.activeTabIndex>0){let i=1,a=2;e=this.stepPercentage*(this.activeTabIndex*a+i)}else e=this.stepPercentage;return e}},methods:{emitTabChange(e,i){this.$emit("on-change",e,i),this.$emit("update:startIndex",i)},addTab(e){console.log(e.$vnode),console.log(this.$.slots);const i=1;e.tabId=`${e.title.replace(/ /g,"")}${i}`,this.tabs.splice(i,0,e),i<this.activeTabIndex+1&&(this.maxStep=i,this.changeTab(this.activeTabIndex+1,i))},removeTab(e){const i=this.tabs,a=i.indexOf(e);a>-1&&(a===this.activeTabIndex&&(this.maxStep=this.activeTabIndex-1,this.changeTab(this.activeTabIndex,this.activeTabIndex-1)),a<this.activeTabIndex&&(this.maxStep=this.activeTabIndex-1,this.activeTabIndex=this.activeTabIndex-1,this.emitTabChange(this.activeTabIndex+1,this.activeTabIndex)),i.splice(a,1))},reset(){this.maxStep=0,this.tabs.forEach(e=>{e.checked=!1}),this.navigateToTab(0)},activateAll(){this.maxStep=this.tabs.length-1,this.tabs.forEach(e=>{e.checked=!0})},navigateToTab(e){let i=e>this.activeTabIndex;if(e<=this.maxStep){let a=()=>{i&&e-this.activeTabIndex>1?(this.changeTab(this.activeTabIndex,this.activeTabIndex+1),this.beforeTabChange(this.activeTabIndex,a)):(this.changeTab(this.activeTabIndex,e),this.afterTabChange(this.activeTabIndex))};i?this.beforeTabChange(this.activeTabIndex,a):(this.setValidationError(null),a())}return e<=this.maxStep},nextTab(){let e=()=>{this.activeTabIndex<this.tabCount-1?(this.changeTab(this.activeTabIndex,this.activeTabIndex+1),this.afterTabChange(this.activeTabIndex)):this.$emit("on-complete")};this.beforeTabChange(this.activeTabIndex,e)},prevTab(){let e=()=>{this.activeTabIndex>0&&(this.setValidationError(null),this.changeTab(this.activeTabIndex,this.activeTabIndex-1))};this.validateOnBack?this.beforeTabChange(this.activeTabIndex,e):e()},focusNextTab(){let e=T(this.tabs);if(e!==-1&&e<this.tabs.length-1){let i=this.tabs[e+1];i.checked&&m(i.tabId)}},focusPrevTab(){let e=T(this.tabs);if(e!==-1&&e>0){let i=this.tabs[e-1].tabId;m(i)}},setLoading(e){this.loading=e,this.$emit("on-loading",e)},setValidationError(e){this.tabs[this.activeTabIndex].validationError=e,this.$emit("on-error",e)},validateBeforeChange(e,i){if(this.setValidationError(null),_(e))this.setLoading(!0),e.then(a=>{this.setLoading(!1);let s=a===!0;this.executeBeforeChange(s,i)}).catch(a=>{this.setLoading(!1),this.setValidationError(a)});else{let a=e===!0;this.executeBeforeChange(a,i)}},executeBeforeChange(e,i){this.$emit("on-validate",e,this.activeTabIndex),e?i():this.tabs[this.activeTabIndex].validationError="error"},beforeTabChange(e,i){if(this.loading)return;let a=this.tabs[e];if(a&&a.beforeChange!==void 0){let s=a.beforeChange();this.validateBeforeChange(s,i)}else i()},afterTabChange(e){if(this.loading)return;let i=this.tabs[e];i&&i.afterChange!==void 0&&i.afterChange()},changeTab(e,i,a=!0){let s=this.tabs[e],n=this.tabs[i];return s&&(s.active=!1),n&&(n.active=!0),a&&this.activeTabIndex!==i&&this.emitTabChange(e,i),this.activeTabIndex=i,this.activateTabAndCheckStep(this.activeTabIndex),!0},tryChangeRoute(e){this.$router&&e.route&&this.$router.push(e.route)},checkRouteChange(e){let i=-1,a=this.tabs.find((s,n)=>{let r=s.route===e;return r&&(i=n),r});if(a&&!a.active){const s=i>this.activeTabIndex;this.navigateToTab(i,s)}},deactivateTabs(){this.tabs.forEach(e=>{e.active=!1})},activateTab(e){this.deactivateTabs();let i=this.tabs[e];i&&(i.active=!0,i.checked=!0,this.tryChangeRoute(i))},activateTabAndCheckStep(e){this.activateTab(e),e>this.maxStep&&(this.maxStep=e),this.activeTabIndex=e},initializeTabs(){this.tabs.length>0&&this.startIndex===0&&this.activateTab(this.activeTabIndex),this.startIndex<this.tabs.length?this.activateTabAndCheckStep(this.startIndex):window.console.warn(`Prop startIndex set to ${this.startIndex} is greater than the number of tabs - ${this.tabs.length}. Make sure that the starting index is less than the number of tabs registered`)}},mounted(){this.initializeTabs()},watch:{"$route.path"(e){this.checkRouteChange(e)}}},v=["id"],E={key:0,class:"wizard-header"},V={class:"wizard-title"},N={class:"category"},P={class:"wizard-navigation"},R={key:0,class:"wizard-progress-with-circle"},F={class:"wizard-tab-content"},K={key:1,class:"wizard-card-footer clearfix"},A={class:"wizard-footer-left"},D={class:"wizard-footer-right"};function O(e,i,a,s,n,r){const M=t.resolveComponent("wizard-step"),f=t.resolveComponent("wizard-button");return t.openBlock(),t.createElementBlock("div",{id:a.id?a.id:"",class:t.normalizeClass(["vue-form-wizard",[a.stepSize,{vertical:r.isVertical}]]),onKeyup:[i[6]||(i[6]=t.withKeys((...l)=>r.focusNextTab&&r.focusNextTab(...l),["right"])),i[7]||(i[7]=t.withKeys((...l)=>r.focusPrevTab&&r.focusPrevTab(...l),["left"]))]},[e.$slots.title?(t.openBlock(),t.createElementBlock("div",E,[t.renderSlot(e.$slots,"title",{},()=>[t.createElementVNode("h4",V,t.toDisplayString(a.title),1),t.createElementVNode("p",N,t.toDisplayString(a.subtitle),1)])])):t.createCommentVNode("",!0),t.createElementVNode("div",P,[r.isVertical?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",R,[t.createElementVNode("div",{class:"wizard-progress-bar",style:t.normalizeStyle(r.progressBarStyle)},null,4)])),t.createElementVNode("ul",{class:t.normalizeClass(["wizard-nav wizard-nav-pills",a.stepsClasses]),role:"tablist"},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(n.tabs,(l,c)=>t.renderSlot(e.$slots,"step",{tab:l,index:c,navigateToTab:r.navigateToTab,stepSize:a.stepSize,transition:a.transition},()=>[t.createVNode(M,{tab:l,"step-size":a.stepSize,onClick:G=>r.navigateToTab(c),onKeyup:t.withKeys(G=>r.navigateToTab(c),["enter"]),transition:a.transition,index:c},null,8,["tab","step-size","onClick","onKeyup","transition","index"])])),256))],2),t.createElementVNode("div",F,[t.renderSlot(e.$slots,"default",t.normalizeProps(t.guardReactiveProps(r.slotProps)))])]),a.hideButtons?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",K,[t.renderSlot(e.$slots,"footer",t.normalizeProps(t.guardReactiveProps(r.slotProps)),()=>[t.createElementVNode("div",A,[r.displayPrevButton?(t.openBlock(),t.createElementBlock("span",{key:0,onClick:i[0]||(i[0]=(...l)=>r.prevTab&&r.prevTab(...l)),onKeyup:i[1]||(i[1]=t.withKeys((...l)=>r.prevTab&&r.prevTab(...l),["enter"])),role:"button",tabindex:"0"},[t.renderSlot(e.$slots,"prev",t.normalizeProps(t.guardReactiveProps(r.slotProps)),()=>[t.createVNode(f,{style:t.normalizeStyle(r.fillButtonStyle),disabled:n.loading},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(a.backButtonText),1)]),_:1},8,["style","disabled"])])],32)):t.createCommentVNode("",!0),t.renderSlot(e.$slots,"custom-buttons-left",t.normalizeProps(t.guardReactiveProps(r.slotProps)))]),t.createElementVNode("div",D,[t.renderSlot(e.$slots,"custom-buttons-right",t.normalizeProps(t.guardReactiveProps(r.slotProps))),r.isLastStep?(t.openBlock(),t.createElementBlock("span",{key:0,onClick:i[2]||(i[2]=(...l)=>r.nextTab&&r.nextTab(...l)),onKeyup:i[3]||(i[3]=t.withKeys((...l)=>r.nextTab&&r.nextTab(...l),["enter"])),role:"button",tabindex:"0"},[t.renderSlot(e.$slots,"finish",t.normalizeProps(t.guardReactiveProps(r.slotProps)),()=>[t.createVNode(f,{style:t.normalizeStyle(r.fillButtonStyle)},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(a.finishButtonText),1)]),_:1},8,["style"])])],32)):(t.openBlock(),t.createElementBlock("span",{key:1,onClick:i[4]||(i[4]=(...l)=>r.nextTab&&r.nextTab(...l)),onKeyup:i[5]||(i[5]=t.withKeys((...l)=>r.nextTab&&r.nextTab(...l),["enter"])),role:"button",tabindex:"0"},[t.renderSlot(e.$slots,"next",t.normalizeProps(t.guardReactiveProps(r.slotProps)),()=>[t.createVNode(f,{style:t.normalizeStyle(r.fillButtonStyle),disabled:n.loading},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(a.nextButtonText),1)]),_:1},8,["style","disabled"])])],32))])])]))],42,v)}var g=d(w,[["render",O]]);const W={name:"tab-content",props:{title:{type:String,default:""},icon:{type:String,default:""},lazy:{type:Boolean,default:!1},beforeChange:{type:Function},afterChange:{type:Function},route:{type:[String,Object]},additionalInfo:{type:Object,default:()=>{}}},inject:["addTab","removeTab"],data(){return{active:!1,validationError:null,checked:!1,tabId:""}},computed:{shape(){return this.$parent.shape},color(){return this.$parent.color},errorColor(){return this.$parent.errorColor}},mounted(){this.addTab(this)},destroyed(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.removeTab(this)}},L=["id","aria-hidden","aria-labelledby"];function j(e,i,a,s,n,r){return!a.lazy||n.active?t.withDirectives((t.openBlock(),t.createElementBlock("div",{key:0,class:"wizard-tab-container",role:"tabpanel",id:n.tabId,"aria-hidden":!n.active,"aria-labelledby":`step-${n.tabId}`},[t.renderSlot(e.$slots,"default",{active:n.active})],8,L)),[[t.vShow,n.active]]):t.createCommentVNode("",!0)}var y=d(W,[["render",j]]);const q={install(e){e.component("form-wizard",g),e.component("tab-content",y),e.component("wizard-button",h),e.component("wizard-step",b)}};o.FormWizard=g,o.TabContent=y,o.WizardButton=h,o.WizardStep=b,o.default=q,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
